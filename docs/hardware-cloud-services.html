<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Hardware: Cloud Services | Big Data Analytics</title>
  <meta name="description" content="A guide to practical big data analytics in R." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Hardware: Cloud Services | Big Data Analytics" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://umatter.github.io/BigData" />
  <meta property="og:image" content="https://umatter.github.io/BigDataimg/cover.png" />
  <meta property="og:description" content="A guide to practical big data analytics in R." />
  <meta name="github-repo" content="umatter/BigData" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Hardware: Cloud Services | Big Data Analytics" />
  
  <meta name="twitter:description" content="A guide to practical big data analytics in R." />
  <meta name="twitter:image" content="https://umatter.github.io/BigDataimg/cover.png" />

<meta name="author" content="Ulrich Matter" />


<meta name="date" content="2022-02-03" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="hardware-computing-resources.html"/>
<link rel="next" href="software-toolbox.html"/>
<script src="libs/header-attrs/header-attrs.js"></script>
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Big Data Analytics</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#what-is-big-in-big-data"><i class="fa fa-check"></i><b>1.1</b> What is <em>big</em> in “Big Data?”</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#content-overview"><i class="fa fa-check"></i><b>1.2</b> Content overview</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#prerequisits"><i class="fa fa-check"></i><b>1.3</b> Prerequisits</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="hardware-computing-resources.html"><a href="hardware-computing-resources.html"><i class="fa fa-check"></i><b>2</b> Hardware: Computing Resources</a>
<ul>
<li class="chapter" data-level="2.1" data-path="hardware-computing-resources.html"><a href="hardware-computing-resources.html#components-of-a-standard-computing-environment"><i class="fa fa-check"></i><b>2.1</b> Components of a standard computing environment</a></li>
<li class="chapter" data-level="2.2" data-path="hardware-computing-resources.html"><a href="hardware-computing-resources.html#mass-storage-and-memory"><i class="fa fa-check"></i><b>2.2</b> Mass Storage and Memory</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="hardware-computing-resources.html"><a href="hardware-computing-resources.html#units-of-informationdata-storage"><i class="fa fa-check"></i><b>2.2.1</b> Units of information/data storage</a></li>
<li class="chapter" data-level="2.2.2" data-path="hardware-computing-resources.html"><a href="hardware-computing-resources.html#combining-ram-and-hard-disk-virtual-memory"><i class="fa fa-check"></i><b>2.2.2</b> Combining RAM and hard-disk: virtual memory</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="hardware-computing-resources.html"><a href="hardware-computing-resources.html#computation"><i class="fa fa-check"></i><b>2.3</b> Computation</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="hardware-computing-resources.html"><a href="hardware-computing-resources.html#gpus-for-scientific-computing"><i class="fa fa-check"></i><b>2.3.1</b> GPUs for Scientific Computing</a></li>
<li class="chapter" data-level="2.3.2" data-path="hardware-computing-resources.html"><a href="hardware-computing-resources.html#gpus-in-r"><i class="fa fa-check"></i><b>2.3.2</b> GPUs in R</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="hardware-computing-resources.html"><a href="hardware-computing-resources.html#resource-allocation"><i class="fa fa-check"></i><b>2.4</b> Resource allocation</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="hardware-cloud-services.html"><a href="hardware-cloud-services.html"><i class="fa fa-check"></i><b>3</b> Hardware: Cloud Services</a>
<ul>
<li class="chapter" data-level="3.1" data-path="hardware-cloud-services.html"><a href="hardware-cloud-services.html#scaling-up-parallel-computing"><i class="fa fa-check"></i><b>3.1</b> Scaling up: parallel computing</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="hardware-cloud-services.html"><a href="hardware-cloud-services.html#setting-up-aws-ec2-with-rrstudio"><i class="fa fa-check"></i><b>3.1.1</b> Setting up AWS EC2 with R/RStudio</a></li>
<li class="chapter" data-level="3.1.2" data-path="hardware-cloud-services.html"><a href="hardware-cloud-services.html#parallelization-with-an-ec2-instance"><i class="fa fa-check"></i><b>3.1.2</b> Parallelization with an EC2 instance</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="hardware-cloud-services.html"><a href="hardware-cloud-services.html#scaling-out-distributed-systems-in-the-cloud"><i class="fa fa-check"></i><b>3.2</b> Scaling out: distributed systems in the cloud</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="hardware-cloud-services.html"><a href="hardware-cloud-services.html#mapreduce"><i class="fa fa-check"></i><b>3.2.1</b> Map/Reduce</a></li>
<li class="chapter" data-level="3.2.2" data-path="hardware-cloud-services.html"><a href="hardware-cloud-services.html#hadoop-word-count"><i class="fa fa-check"></i><b>3.2.2</b> Hadoop Word Count</a></li>
<li class="chapter" data-level="3.2.3" data-path="hardware-cloud-services.html"><a href="hardware-cloud-services.html#install-hadoop-on-ubuntupop_os-linux"><i class="fa fa-check"></i><b>3.2.3</b> Install Hadoop (on Ubuntu/Pop!_OS Linux)</a></li>
<li class="chapter" data-level="3.2.4" data-path="hardware-cloud-services.html"><a href="hardware-cloud-services.html#run-hadoop"><i class="fa fa-check"></i><b>3.2.4</b> Run Hadoop</a></li>
<li class="chapter" data-level="3.2.5" data-path="hardware-cloud-services.html"><a href="hardware-cloud-services.html#run-example"><i class="fa fa-check"></i><b>3.2.5</b> Run example</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="software-toolbox.html"><a href="software-toolbox.html"><i class="fa fa-check"></i><b>4</b> Software: Toolbox</a>
<ul>
<li class="chapter" data-level="4.1" data-path="software-toolbox.html"><a href="software-toolbox.html#advanced-r-programming"><i class="fa fa-check"></i><b>4.1</b> Advanced R Programming</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="software-toolbox.html"><a href="software-toolbox.html#r-tools-to-investigate-performanceresource-allocation"><i class="fa fa-check"></i><b>4.1.1</b> R-tools to investigate performance/resource allocation</a></li>
<li class="chapter" data-level="4.1.2" data-path="software-toolbox.html"><a href="software-toolbox.html#r-tools-to-investigate-structures-and-types"><i class="fa fa-check"></i><b>4.1.2</b> R-tools to investigate structures and types</a></li>
<li class="chapter" data-level="4.1.3" data-path="software-toolbox.html"><a href="software-toolbox.html#data-types-and-memorystorage"><i class="fa fa-check"></i><b>4.1.3</b> Data types and memory/storage</a></li>
<li class="chapter" data-level="4.1.4" data-path="software-toolbox.html"><a href="software-toolbox.html#data-structures"><i class="fa fa-check"></i><b>4.1.4</b> Data structures</a></li>
<li class="chapter" data-level="4.1.5" data-path="software-toolbox.html"><a href="software-toolbox.html#vectors-vs-factors-in-r"><i class="fa fa-check"></i><b>4.1.5</b> Vectors vs Factors in R</a></li>
<li class="chapter" data-level="4.1.6" data-path="software-toolbox.html"><a href="software-toolbox.html#programming-with-big-data-in-r"><i class="fa fa-check"></i><b>4.1.6</b> Programming with (Big) Data in R</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="big-data-cleaning-and-transformation.html"><a href="big-data-cleaning-and-transformation.html"><i class="fa fa-check"></i><b>5</b> Big Data Cleaning and Transformation</a>
<ul>
<li class="chapter" data-level="5.1" data-path="big-data-cleaning-and-transformation.html"><a href="big-data-cleaning-and-transformation.html#out-of-memory-strategies"><i class="fa fa-check"></i><b>5.1</b> ‘Out-of-memory’ strategies</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="big-data-cleaning-and-transformation.html"><a href="big-data-cleaning-and-transformation.html#chunking-data-with-the-ff-package"><i class="fa fa-check"></i><b>5.1.1</b> Chunking data with the <code>ff</code>-package</a></li>
<li class="chapter" data-level="5.1.2" data-path="big-data-cleaning-and-transformation.html"><a href="big-data-cleaning-and-transformation.html#memory-mapping-with-bigmemory"><i class="fa fa-check"></i><b>5.1.2</b> Memory mapping with <code>bigmemory</code></a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="big-data-cleaning-and-transformation.html"><a href="big-data-cleaning-and-transformation.html#typical-cleaning-tasks"><i class="fa fa-check"></i><b>5.2</b> Typical cleaning tasks</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="big-data-cleaning-and-transformation.html"><a href="big-data-cleaning-and-transformation.html#data-preparation-with-ff"><i class="fa fa-check"></i><b>5.2.1</b> Data Preparation with <code>ff</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="descriptive-statistics-and-aggregation.html"><a href="descriptive-statistics-and-aggregation.html"><i class="fa fa-check"></i><b>6</b> Descriptive Statistics and Aggregation</a>
<ul>
<li class="chapter" data-level="6.1" data-path="descriptive-statistics-and-aggregation.html"><a href="descriptive-statistics-and-aggregation.html#data-aggregation-the-split-apply-combine-strategy"><i class="fa fa-check"></i><b>6.1</b> Data aggregation: The ‘split-apply-combine’ strategy</a></li>
<li class="chapter" data-level="6.2" data-path="descriptive-statistics-and-aggregation.html"><a href="descriptive-statistics-and-aggregation.html#data-aggregation-tutorial"><i class="fa fa-check"></i><b>6.2</b> Data aggregation tutorial</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="descriptive-statistics-and-aggregation.html"><a href="descriptive-statistics-and-aggregation.html#gathering-and-compilation-of-all-the-raw-data"><i class="fa fa-check"></i><b>6.2.1</b> Gathering and Compilation of all the raw data</a></li>
<li class="chapter" data-level="6.2.2" data-path="descriptive-statistics-and-aggregation.html"><a href="descriptive-statistics-and-aggregation.html#data-aggregation-with-chunked-data-files"><i class="fa fa-check"></i><b>6.2.2</b> Data aggregation with chunked data files</a></li>
<li class="chapter" data-level="6.2.3" data-path="descriptive-statistics-and-aggregation.html"><a href="descriptive-statistics-and-aggregation.html#high-speed-in-memory-data-aggregation-with-data.table"><i class="fa fa-check"></i><b>6.2.3</b> High-speed in-memory data aggregation with <code>data.table</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="big-data-visualization.html"><a href="big-data-visualization.html"><i class="fa fa-check"></i><b>7</b> (Big) Data Visualization</a>
<ul>
<li class="chapter" data-level="7.1" data-path="big-data-visualization.html"><a href="big-data-visualization.html#data-set"><i class="fa fa-check"></i><b>7.1</b> Data Set</a></li>
<li class="chapter" data-level="7.2" data-path="big-data-visualization.html"><a href="big-data-visualization.html#excursus-modify-and-create-themes"><i class="fa fa-check"></i><b>7.2</b> Excursus: modify and create themes</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="big-data-visualization.html"><a href="big-data-visualization.html#create-your-own-theme-simple-approach"><i class="fa fa-check"></i><b>7.2.1</b> Create your own theme: simple approach</a></li>
<li class="chapter" data-level="7.2.2" data-path="big-data-visualization.html"><a href="big-data-visualization.html#implementing-actual-themes-as-functions."><i class="fa fa-check"></i><b>7.2.2</b> Implementing actual themes as functions.</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="big-data-visualization.html"><a href="big-data-visualization.html#visualize-time-and-space"><i class="fa fa-check"></i><b>7.3</b> Visualize Time and Space</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="big-data-visualization.html"><a href="big-data-visualization.html#preparations"><i class="fa fa-check"></i><b>7.3.1</b> Preparations</a></li>
<li class="chapter" data-level="7.3.2" data-path="big-data-visualization.html"><a href="big-data-visualization.html#pick-up-and-drop-off-locations"><i class="fa fa-check"></i><b>7.3.2</b> Pick-up and drop-off locations</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="big-data-visualization.html"><a href="big-data-visualization.html#excursus-change-color-schemes"><i class="fa fa-check"></i><b>7.4</b> Excursus: change color schemes</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="bottle-necks-in-local-big-data-analytics.html"><a href="bottle-necks-in-local-big-data-analytics.html"><i class="fa fa-check"></i><b>8</b> Bottle Necks in Local Big Data Analytics</a>
<ul>
<li class="chapter" data-level="8.1" data-path="bottle-necks-in-local-big-data-analytics.html"><a href="bottle-necks-in-local-big-data-analytics.html#example-of-computation-time-and-memory-allocation"><i class="fa fa-check"></i><b>8.1</b> Example of Computation Time and Memory Allocation</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="bottle-necks-in-local-big-data-analytics.html"><a href="bottle-necks-in-local-big-data-analytics.html#preparation"><i class="fa fa-check"></i><b>8.1.1</b> Preparation</a></li>
<li class="chapter" data-level="8.1.2" data-path="bottle-necks-in-local-big-data-analytics.html"><a href="bottle-necks-in-local-big-data-analytics.html#naïve-approach-ignorant-of-r"><i class="fa fa-check"></i><b>8.1.2</b> Naïve Approach (ignorant of R)</a></li>
<li class="chapter" data-level="8.1.3" data-path="bottle-necks-in-local-big-data-analytics.html"><a href="bottle-necks-in-local-big-data-analytics.html#improvement-1-pre-allocation-of-memory"><i class="fa fa-check"></i><b>8.1.3</b> Improvement 1: Pre-allocation of memory</a></li>
<li class="chapter" data-level="8.1.4" data-path="bottle-necks-in-local-big-data-analytics.html"><a href="bottle-necks-in-local-big-data-analytics.html#improvement-2-exploit-vectorization"><i class="fa fa-check"></i><b>8.1.4</b> Improvement 2: Exploit vectorization</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="bottle-necks-in-local-big-data-analytics.html"><a href="bottle-necks-in-local-big-data-analytics.html#case-study-parallel-processing"><i class="fa fa-check"></i><b>8.2</b> Case study: Parallel processing</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="bottle-necks-in-local-big-data-analytics.html"><a href="bottle-necks-in-local-big-data-analytics.html#parallelization-with-an-ec2-instance-1"><i class="fa fa-check"></i><b>8.2.1</b> Parallelization with an EC2 instance</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="bottle-necks-in-local-big-data-analytics.html"><a href="bottle-necks-in-local-big-data-analytics.html#case-study-memory-allocation"><i class="fa fa-check"></i><b>8.3</b> Case study: Memory allocation</a></li>
<li class="chapter" data-level="8.4" data-path="bottle-necks-in-local-big-data-analytics.html"><a href="bottle-necks-in-local-big-data-analytics.html#big-data-econometrics"><i class="fa fa-check"></i><b>8.4</b> Big Data econometrics</a></li>
<li class="chapter" data-level="8.5" data-path="bottle-necks-in-local-big-data-analytics.html"><a href="bottle-necks-in-local-big-data-analytics.html#example-fast-least-squares-regression"><i class="fa fa-check"></i><b>8.5</b> Example: Fast least squares regression</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="bottle-necks-in-local-big-data-analytics.html"><a href="bottle-necks-in-local-big-data-analytics.html#ols-as-a-point-of-reference"><i class="fa fa-check"></i><b>8.5.1</b> OLS as a point of reference</a></li>
<li class="chapter" data-level="8.5.2" data-path="bottle-necks-in-local-big-data-analytics.html"><a href="bottle-necks-in-local-big-data-analytics.html#the-uluru-algorithm-as-an-alternative-to-ols"><i class="fa fa-check"></i><b>8.5.2</b> The Uluru algorithm as an alternative to OLS</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="bottle-necks-in-local-big-data-analytics.html"><a href="bottle-necks-in-local-big-data-analytics.html#gpus-and-machine-learning"><i class="fa fa-check"></i><b>8.6</b> GPUs and Machine Learning</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="bottle-necks-in-local-big-data-analytics.html"><a href="bottle-necks-in-local-big-data-analytics.html#tensorflowkeras-example-predict-housing-prices"><i class="fa fa-check"></i><b>8.6.1</b> Tensorflow/Keras example: predict housing prices</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="bottle-necks-in-local-big-data-analytics.html"><a href="bottle-necks-in-local-big-data-analytics.html#a-word-of-caution"><i class="fa fa-check"></i><b>8.7</b> A word of caution</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="applied-econometrics-with-apache-spark.html"><a href="applied-econometrics-with-apache-spark.html"><i class="fa fa-check"></i><b>9</b> Applied Econometrics with Apache Spark</a>
<ul>
<li class="chapter" data-level="9.1" data-path="applied-econometrics-with-apache-spark.html"><a href="applied-econometrics-with-apache-spark.html#spark-basics"><i class="fa fa-check"></i><b>9.1</b> Spark basics</a></li>
<li class="chapter" data-level="9.2" data-path="applied-econometrics-with-apache-spark.html"><a href="applied-econometrics-with-apache-spark.html#spark-in-r"><i class="fa fa-check"></i><b>9.2</b> Spark in R</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="applied-econometrics-with-apache-spark.html"><a href="applied-econometrics-with-apache-spark.html#data-import-and-summary-statistics"><i class="fa fa-check"></i><b>9.2.1</b> Data import and summary statistics</a></li>
<li class="chapter" data-level="9.2.2" data-path="applied-econometrics-with-apache-spark.html"><a href="applied-econometrics-with-apache-spark.html#regression-analysis-with-sparklyr"><i class="fa fa-check"></i><b>9.2.2</b> Regression analysis with <code>sparklyr</code></a></li>
</ul></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="appendix-a.html"><a href="appendix-a.html"><i class="fa fa-check"></i><b>A</b> Appendix A</a>
<ul>
<li class="chapter" data-level="A.1" data-path="appendix-a.html"><a href="appendix-a.html#github"><i class="fa fa-check"></i><b>A.1</b> GitHub</a>
<ul>
<li class="chapter" data-level="A.1.1" data-path="appendix-a.html"><a href="appendix-a.html#initiate-a-new-repository"><i class="fa fa-check"></i><b>A.1.1</b> Initiate a new repository</a></li>
<li class="chapter" data-level="A.1.2" data-path="appendix-a.html"><a href="appendix-a.html#clone-this-courses-repository"><i class="fa fa-check"></i><b>A.1.2</b> Clone this course’s repository</a></li>
<li class="chapter" data-level="A.1.3" data-path="appendix-a.html"><a href="appendix-a.html#fork-this-courses-repository"><i class="fa fa-check"></i><b>A.1.3</b> Fork this course’s repository</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="B" data-path="appendix-b.html"><a href="appendix-b.html"><i class="fa fa-check"></i><b>B</b> Appendix B</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://umatter.github.io" target="blank">umatter.github.io</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Big Data Analytics</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="hardware-cloud-services" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> Hardware: Cloud Services</h1>
<p>So far we have focused on the available computing resources on our local machines (desktop/laptop) and how to use them optimally when dealing with large amounts of data and/or computationally demanding tasks. A key aspect of this has been to understand why our local machine is struggling with a computing task when there is a large amount of data to be processed and then identify potential avenues to use the available resources more efficiently. For example, by using one of the following approaches:</p>
<ul>
<li>Computationally intense tasks (but not pushing RAM to the limit): parallelization, using several CPU cores (nodes) in parallel.</li>
<li>Memory-intense tasks (data still fits into RAM): efficient memory allocation.</li>
<li>Memory-intense tasks (data does not fit into RAM): efficient use of virtual memory (use parts of mass storage device as virtual memory).</li>
<li>Big Data storage: efficient storage (avoid redundancies) and efficient access (speed) with RDBMSs.</li>
</ul>
<p>In practice, data sets might be too large for our local machine even if we take all of the techniques listed above into account. That is, a parallelized task might still take ages to complete because our local machine has too few cores available, a task involving virtual memory would use up way too much space on our hard-disk, etc.</p>
<p>In such situations, we have to think about horizontal and vertical scaling beyond our local machine. That is, we outsource tasks to a bigger machine (or a cluster of machines) to which our local computer is connected (typically, over the Internet). While only one or two decades ago most organizations had their own large centrally hosted machines (database servers, cluster computers) for such tasks, today they often rely on third-party solutions <em>‘in the cloud’</em>. That is, specialized companies provide flexible access to computing resources that can be easily accessed via a broadband Internet-connection and rented on an hourly (or even minutes or seconds) basis. Given the obvious economies of scale in this line of business, a few large players have emerged who practically dominate most of the global market:</p>
<ul>
<li><a href="https://aws.amazon.com/">Amazon Web Services (AWS)</a>.</li>
<li><a href="https://azure.microsoft.com/en-us/">Microsoft Azure</a></li>
<li><a href="https://cloud.google.com/">Google Cloud Platform</a></li>
<li><a href="https://www.ibm.com/cloud/">IBM Cloud</a></li>
<li><a href="https://www.alibabacloud.com/">Alibaba Cloud</a></li>
<li><a href="https://intl.cloud.tencent.com/">Tencent Cloud</a></li>
<li>and others.</li>
</ul>
<p>When we use such cloud services to <em>scale up</em> (vertical scaling) the computing resources, the transition from our local implementation of a data analytics task to the cloud implementation is often rather simple. Once we have set up a cloud instance and figured out how to communicate with it, we typically can even run the exact same R-script locally or in the cloud. This is usually the case for parallelized tasks (simply run the same script on a machine with more cores), in-memory tasks (rent a machine with more RAM but still use <code>data.table()</code> etc.), and working with an SQL database (simply set up the database in the cloud instead of locally).</p>
<p>However, for really memory-intense tasks, the cloud provides options to <em>scale out</em> (horizontal scaling). Meaning, a task is distributed among a cluster of (virtual) computing instances/servers. The implementation of such data analytics tasks is commonly based on a paradigm that we rather do not encounter when working locally: <em>Map/Reduce</em> (implemented in the <em>Hadoop</em> framework).</p>
<p>In the following, we look first at scaling up more familiar approaches with the help of the cloud and then look at the Map/Reduce concept and how it can be applied in <em>Hadoop</em>.</p>
<div id="scaling-up-parallel-computing" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Scaling up: parallel computing</h2>
<div id="setting-up-aws-ec2-with-rrstudio" class="section level3" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Setting up AWS EC2 with R/RStudio</h3>
<p>To run the following examples on AWS, first go to <code>www.aws.com</code> and create an account. One of the easiest ways to set up an AWS EC2 instance for R/RStudio is to use <a href="https://www.louisaslett.com/RStudio_AMI/">Louis Aslett’s Amazon Machine Image (AMI)</a>. This way you do not need to install R/Rstudio yourself. Simply follow these five steps:</p>
<ul>
<li><p>Depending on the region in which you want to initiate your EC2 instance, click on the corresponding AMI link in <a href="https://www.louisaslett.com/RStudio_AMI/" class="uri">https://www.louisaslett.com/RStudio_AMI/</a>. For example, if you want to initiate the instance in Frankfurt click on <a href="https://console.aws.amazon.com/ec2/home?region=eu-central-1#launchAmi=ami-076abd591c4335092">ami-076abd591c4335092</a>. You will be automatically directed to the AWS page where you can select the type of EC2 instance you want to initiate. Per default the free tier T2.micro instance is selected (I recommend using this type of instance, if you simply want to try out the examples below).</p></li>
<li><p>After selecting the instance type, click on “Review and Launch.” On the opened page, select “Edit security groups.” There should be one entry with <code>SSH</code> selected in the drop-down menu. Click on this drop-down menu and select <code>HTTP</code> (instead of <code>SSH</code>). Click again on “Review and Launch” to confirm the change.</p></li>
<li><p>Then, click “Launch” to initiate the instance. From the pop-up concerning the key pair, select “Proceed without a key pair” from the drop-down menu and check the box below (“I acknowledge …”). Click “Launch” to confirm. A page opens. Click on “View” instances to see all of your instances and their status. Wait until “Status check” is “2/2 checks passed” (you might want to refresh the instance overview or browser window).</p></li>
<li><p>Click on the instance ID of your newly launched instance and copy the public IPv4 address, open a new browser window/tab, type in <code>http://</code>, paste the IP address, and hit enter (the address in your browser bar will be something like <code>http://3.66.120.150</code>; <code>http</code>, not <code>https</code>!) .</p></li>
<li><p>You should see the login-interface to RStudio on your cloud instance. The username is <code>rstudio</code> and the password is the instance ID of your newly launched instance (it might take a while to load R/Rstudio). Once RStudio is loaded, you are ready to go.</p></li>
</ul>
<p><em>NOTE</em>: the instructions above help you set up your own EC2 instance with R/RStudio to run some example scripts and tryout R on EC2. For more serious/professional (long-term) usage of an EC2 instance, I strongly recommend to set it up manually and improve the security settings accordingly! The above set up will theoretically result in your instance being accessible for anyone in the Web (something you might want to avoid).</p>
</div>
<div id="parallelization-with-an-ec2-instance" class="section level3" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Parallelization with an EC2 instance</h3>
<p>This short tutorial illustrates how to scale the computation up by running it on an AWS EC2 instance. Thereby, we build on the techniques discussed in the previous chapter. Note that our EC2 instance is a Linux machine. When running R on a Linux machine, there is sometimes an additional step to install R packages (at least for most of the packages): R packages need to be compiled before they can be installed. The command to install packages is exactly the same (<code>install.packages()</code>) and normally you only notice a slight difference in the output shown in the R console during installation (and the installation process takes a little longer than what you are used to). In some cases you might also have to install additional dependencies directly in Linux. Apart from that, using R via RStudio Server in the cloud looks/feels very similar if not identical as when using R/RStudio locally.</p>
<div id="parallel-computing-demo" class="section level4" number="3.1.2.1">
<h4><span class="header-section-number">3.1.2.1</span> Parallel computing demo</h4>
</div>
<div id="increase-memorystorage" class="section level4" number="3.1.2.2">
<h4><span class="header-section-number">3.1.2.2</span> Increase memory/storage</h4>
</div>
</div>
</div>
<div id="scaling-out-distributed-systems-in-the-cloud" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Scaling out: distributed systems in the cloud</h2>
<div id="mapreduce" class="section level3" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> Map/Reduce</h3>
<div id="mapreduce-concept-illustrated-in-r" class="section level4" number="3.2.1.1">
<h4><span class="header-section-number">3.2.1.1</span> Map/Reduce Concept Illustrated in R</h4>
<p>In order to better understand the basic concept behind the MapReduce-Framework on a distributed system, let’s look at how we can combine the basic functions <code>map()</code> and <code>reduce()</code> in R to implement the basic MapReduce example shown in <span class="citation"><a href="references.html#ref-walkowiak_2016" role="doc-biblioref">Walkowiak</a> (<a href="references.html#ref-walkowiak_2016" role="doc-biblioref">2016</a>)</span>, Chapter 4, pages 132-134 (this is just to illustrate the underlying idea, <em>not</em> to suggest that MapReduce actually is simply an application of the classical <code>map</code> and <code>reduce (fold)</code> functions in functional programming).<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a> The overall aim of the program is to count the number of times each word is repeated in a given text. The input to the program is thus a text, the output is a list of key-value pairs with the unique words occurring in the text as keys and their respective number of occurrences as values.</p>
<p>In the code example, we will use the following text as input.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="hardware-cloud-services.html#cb9-1" aria-hidden="true" tabindex="-1"></a>input_text <span class="ot">&lt;-</span></span>
<span id="cb9-2"><a href="hardware-cloud-services.html#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Simon is a friend of Becky.</span></span>
<span id="cb9-3"><a href="hardware-cloud-services.html#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="st">Becky is a friend of Ann.</span></span>
<span id="cb9-4"><a href="hardware-cloud-services.html#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="st">Ann is not a friend of Simon.&quot;</span></span></code></pre></div>
</div>
<div id="mapper" class="section level4" number="3.2.1.2">
<h4><span class="header-section-number">3.2.1.2</span> Mapper</h4>
<p>The Mapper first splits the text into lines, and then splits the lines into key-value pairs, assigning to each key the value <code>1</code>. For the first step we use <code>strsplit()</code> that takes a character string as input and splits it into a list of substrings according to the matches of a substring (here <code>"\n"</code>, indicating the end of a line).</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="hardware-cloud-services.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mapper splits input into lines</span></span>
<span id="cb10-2"><a href="hardware-cloud-services.html#cb10-2" aria-hidden="true" tabindex="-1"></a>lines <span class="ot">&lt;-</span> <span class="fu">as.list</span>(<span class="fu">strsplit</span>(input_text, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)[[<span class="dv">1</span>]])</span>
<span id="cb10-3"><a href="hardware-cloud-services.html#cb10-3" aria-hidden="true" tabindex="-1"></a>lines</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;Simon is a friend of Becky.&quot;
## 
## [[2]]
## [1] &quot;Becky is a friend of Ann.&quot;
## 
## [[3]]
## [1] &quot;Ann is not a friend of Simon.&quot;</code></pre>
<p>In a second step, we apply our own function (<code>map_fun()</code>) to each line of text via <code>Map()</code>. <code>map_fun()</code> splits each line into words (keys) and assigns a value of <code>1</code> to each key.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="hardware-cloud-services.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mapper splits lines into Key-Value pairs</span></span>
<span id="cb12-2"><a href="hardware-cloud-services.html#cb12-2" aria-hidden="true" tabindex="-1"></a>map_fun <span class="ot">&lt;-</span></span>
<span id="cb12-3"><a href="hardware-cloud-services.html#cb12-3" aria-hidden="true" tabindex="-1"></a>     <span class="cf">function</span>(x){</span>
<span id="cb12-4"><a href="hardware-cloud-services.html#cb12-4" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb12-5"><a href="hardware-cloud-services.html#cb12-5" aria-hidden="true" tabindex="-1"></a>          <span class="co"># remove special characters</span></span>
<span id="cb12-6"><a href="hardware-cloud-services.html#cb12-6" aria-hidden="true" tabindex="-1"></a>          x_clean <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;[[:punct:]]&quot;</span>, <span class="st">&quot;&quot;</span>, x)</span>
<span id="cb12-7"><a href="hardware-cloud-services.html#cb12-7" aria-hidden="true" tabindex="-1"></a>          <span class="co"># split line into words</span></span>
<span id="cb12-8"><a href="hardware-cloud-services.html#cb12-8" aria-hidden="true" tabindex="-1"></a>          keys <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">strsplit</span>(x_clean, <span class="st">&quot; &quot;</span>))</span>
<span id="cb12-9"><a href="hardware-cloud-services.html#cb12-9" aria-hidden="true" tabindex="-1"></a>          <span class="co"># initiate key-value pairs</span></span>
<span id="cb12-10"><a href="hardware-cloud-services.html#cb12-10" aria-hidden="true" tabindex="-1"></a>          key_values <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span>, <span class="fu">length</span>(keys))</span>
<span id="cb12-11"><a href="hardware-cloud-services.html#cb12-11" aria-hidden="true" tabindex="-1"></a>          <span class="fu">names</span>(key_values) <span class="ot">&lt;-</span> keys</span>
<span id="cb12-12"><a href="hardware-cloud-services.html#cb12-12" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb12-13"><a href="hardware-cloud-services.html#cb12-13" aria-hidden="true" tabindex="-1"></a>          <span class="fu">return</span>(key_values)</span>
<span id="cb12-14"><a href="hardware-cloud-services.html#cb12-14" aria-hidden="true" tabindex="-1"></a>     }</span>
<span id="cb12-15"><a href="hardware-cloud-services.html#cb12-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-16"><a href="hardware-cloud-services.html#cb12-16" aria-hidden="true" tabindex="-1"></a>kv_pairs <span class="ot">&lt;-</span> <span class="fu">Map</span>(map_fun, lines)</span>
<span id="cb12-17"><a href="hardware-cloud-services.html#cb12-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-18"><a href="hardware-cloud-services.html#cb12-18" aria-hidden="true" tabindex="-1"></a><span class="co"># look at the result</span></span>
<span id="cb12-19"><a href="hardware-cloud-services.html#cb12-19" aria-hidden="true" tabindex="-1"></a>kv_pairs</span></code></pre></div>
<pre><code>## [[1]]
##  Simon     is      a friend     of  Becky 
##      1      1      1      1      1      1 
## 
## [[2]]
##  Becky     is      a friend     of    Ann 
##      1      1      1      1      1      1 
## 
## [[3]]
##    Ann     is    not      a friend     of  Simon 
##      1      1      1      1      1      1      1</code></pre>
</div>
<div id="reducer" class="section level4" number="3.2.1.3">
<h4><span class="header-section-number">3.2.1.3</span> Reducer</h4>
<p>The Reducer first sorts and shuffles the input from the Mapper and then reduces the key-value pairs by summing up the values for each key.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="hardware-cloud-services.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># order and shuffle</span></span>
<span id="cb14-2"><a href="hardware-cloud-services.html#cb14-2" aria-hidden="true" tabindex="-1"></a>kv_pairs <span class="ot">&lt;-</span> <span class="fu">unlist</span>(kv_pairs)</span>
<span id="cb14-3"><a href="hardware-cloud-services.html#cb14-3" aria-hidden="true" tabindex="-1"></a>keys <span class="ot">&lt;-</span> <span class="fu">unique</span>(<span class="fu">names</span>(kv_pairs))</span>
<span id="cb14-4"><a href="hardware-cloud-services.html#cb14-4" aria-hidden="true" tabindex="-1"></a>keys <span class="ot">&lt;-</span> keys[<span class="fu">order</span>(keys)]</span>
<span id="cb14-5"><a href="hardware-cloud-services.html#cb14-5" aria-hidden="true" tabindex="-1"></a>shuffled <span class="ot">&lt;-</span> <span class="fu">lapply</span>(keys,</span>
<span id="cb14-6"><a href="hardware-cloud-services.html#cb14-6" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">function</span>(x) kv_pairs[x <span class="sc">==</span> <span class="fu">names</span>(kv_pairs)])</span>
<span id="cb14-7"><a href="hardware-cloud-services.html#cb14-7" aria-hidden="true" tabindex="-1"></a>shuffled</span></code></pre></div>
<pre><code>## [[1]]
## a a a 
## 1 1 1 
## 
## [[2]]
## Ann Ann 
##   1   1 
## 
## [[3]]
## Becky Becky 
##     1     1 
## 
## [[4]]
## friend friend friend 
##      1      1      1 
## 
## [[5]]
## is is is 
##  1  1  1 
## 
## [[6]]
## not 
##   1 
## 
## [[7]]
## of of of 
##  1  1  1 
## 
## [[8]]
## Simon Simon 
##     1     1</code></pre>
<p>Now we can sum up the keys in order to get the word count for the entire input.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="hardware-cloud-services.html#cb16-1" aria-hidden="true" tabindex="-1"></a>sums <span class="ot">&lt;-</span> <span class="fu">sapply</span>(shuffled, sum)</span>
<span id="cb16-2"><a href="hardware-cloud-services.html#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(sums) <span class="ot">&lt;-</span> keys</span>
<span id="cb16-3"><a href="hardware-cloud-services.html#cb16-3" aria-hidden="true" tabindex="-1"></a>sums</span></code></pre></div>
<pre><code>##      a    Ann  Becky friend     is    not     of 
##      3      2      2      3      3      1      3 
##  Simon 
##      2</code></pre>
</div>
<div id="simpler-example-compute-the-total-number-of-words" class="section level4" number="3.2.1.4">
<h4><span class="header-section-number">3.2.1.4</span> Simpler example: Compute the total number of words</h4>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="hardware-cloud-services.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># assigns the number of words per line as value</span></span>
<span id="cb18-2"><a href="hardware-cloud-services.html#cb18-2" aria-hidden="true" tabindex="-1"></a>map_fun2 <span class="ot">&lt;-</span> </span>
<span id="cb18-3"><a href="hardware-cloud-services.html#cb18-3" aria-hidden="true" tabindex="-1"></a>     <span class="cf">function</span>(x){</span>
<span id="cb18-4"><a href="hardware-cloud-services.html#cb18-4" aria-hidden="true" tabindex="-1"></a>          <span class="co"># remove special characters</span></span>
<span id="cb18-5"><a href="hardware-cloud-services.html#cb18-5" aria-hidden="true" tabindex="-1"></a>          x_clean <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;[[:punct:]]&quot;</span>, <span class="st">&quot;&quot;</span>, x)</span>
<span id="cb18-6"><a href="hardware-cloud-services.html#cb18-6" aria-hidden="true" tabindex="-1"></a>          <span class="co"># split line into words, count no. of words per line</span></span>
<span id="cb18-7"><a href="hardware-cloud-services.html#cb18-7" aria-hidden="true" tabindex="-1"></a>          values <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unlist</span>(<span class="fu">strsplit</span>(x_clean, <span class="st">&quot; &quot;</span>)))</span>
<span id="cb18-8"><a href="hardware-cloud-services.html#cb18-8" aria-hidden="true" tabindex="-1"></a>          <span class="fu">return</span>(values)</span>
<span id="cb18-9"><a href="hardware-cloud-services.html#cb18-9" aria-hidden="true" tabindex="-1"></a>     }</span>
<span id="cb18-10"><a href="hardware-cloud-services.html#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Mapper</span></span>
<span id="cb18-11"><a href="hardware-cloud-services.html#cb18-11" aria-hidden="true" tabindex="-1"></a>mapped <span class="ot">&lt;-</span> <span class="fu">Map</span>(map_fun2, lines)</span>
<span id="cb18-12"><a href="hardware-cloud-services.html#cb18-12" aria-hidden="true" tabindex="-1"></a>mapped</span></code></pre></div>
<pre><code>## [[1]]
## [1] 6
## 
## [[2]]
## [1] 6
## 
## [[3]]
## [1] 7</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="hardware-cloud-services.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reducer</span></span>
<span id="cb20-2"><a href="hardware-cloud-services.html#cb20-2" aria-hidden="true" tabindex="-1"></a>reduced <span class="ot">&lt;-</span> <span class="fu">Reduce</span>(sum, mapped)</span>
<span id="cb20-3"><a href="hardware-cloud-services.html#cb20-3" aria-hidden="true" tabindex="-1"></a>reduced</span></code></pre></div>
<pre><code>## [1] 19</code></pre>
</div>
</div>
<div id="hadoop-word-count" class="section level3" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> Hadoop Word Count</h3>
<p>Example adapted from <a href="https://www.digitalocean.com/community/tutorials/how-to-install-hadoop-in-stand-alone-mode-on-ubuntu-18-04#step-2-%E2%80%94-installing-hadoop">this tutorial</a> by Melissa Anderson and Hanif Jetha.</p>
</div>
<div id="install-hadoop-on-ubuntupop_os-linux" class="section level3" number="3.2.3">
<h3><span class="header-section-number">3.2.3</span> Install Hadoop (on Ubuntu/Pop!_OS Linux)</h3>
<div class="sourceCode" id="cb22"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="hardware-cloud-services.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># download binary</span></span>
<span id="cb22-2"><a href="hardware-cloud-services.html#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">wget</span> https://downloads.apache.org/hadoop/common/hadoop-2.10.0/hadoop-2.10.0.tar.gz</span>
<span id="cb22-3"><a href="hardware-cloud-services.html#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="co"># download checksum</span></span>
<span id="cb22-4"><a href="hardware-cloud-services.html#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="fu">wget</span> https://www.apache.org/dist/hadoop/common/hadoop-2.10.0/hadoop-2.10.0.tar.gz.sha512</span>
<span id="cb22-5"><a href="hardware-cloud-services.html#cb22-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-6"><a href="hardware-cloud-services.html#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="co"># run the verification</span></span>
<span id="cb22-7"><a href="hardware-cloud-services.html#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="ex">shasum</span> <span class="at">-a</span> 512 hadoop-2.10.0.tar.gz</span>
<span id="cb22-8"><a href="hardware-cloud-services.html#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="co"># compare with value in mds file</span></span>
<span id="cb22-9"><a href="hardware-cloud-services.html#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> hadoop-2.10.0.tar.gz.sha512</span>
<span id="cb22-10"><a href="hardware-cloud-services.html#cb22-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-11"><a href="hardware-cloud-services.html#cb22-11" aria-hidden="true" tabindex="-1"></a><span class="co"># if all is fine, unpack</span></span>
<span id="cb22-12"><a href="hardware-cloud-services.html#cb22-12" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-xzvf</span> hadoop-2.10.0.tar.gz</span>
<span id="cb22-13"><a href="hardware-cloud-services.html#cb22-13" aria-hidden="true" tabindex="-1"></a><span class="co"># move to proper place</span></span>
<span id="cb22-14"><a href="hardware-cloud-services.html#cb22-14" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> mv hadoop-2.10.0 /usr/local/hadoop</span>
<span id="cb22-15"><a href="hardware-cloud-services.html#cb22-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-16"><a href="hardware-cloud-services.html#cb22-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-17"><a href="hardware-cloud-services.html#cb22-17" aria-hidden="true" tabindex="-1"></a><span class="co"># then point to this version from hadoop</span></span>
<span id="cb22-18"><a href="hardware-cloud-services.html#cb22-18" aria-hidden="true" tabindex="-1"></a><span class="co"># open the file /usr/local/hadoop/etc/hadoop/hadoop-env.sh</span></span>
<span id="cb22-19"><a href="hardware-cloud-services.html#cb22-19" aria-hidden="true" tabindex="-1"></a><span class="co"># in a text editor and add (where export JAVA_HOME=...)</span></span>
<span id="cb22-20"><a href="hardware-cloud-services.html#cb22-20" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">JAVA_HOME=$(</span><span class="fu">readlink</span> <span class="at">-f</span> /usr/bin/java <span class="kw">|</span> <span class="fu">sed</span> <span class="st">&quot;s:bin/java::&quot;</span><span class="va">)</span></span>
<span id="cb22-21"><a href="hardware-cloud-services.html#cb22-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-22"><a href="hardware-cloud-services.html#cb22-22" aria-hidden="true" tabindex="-1"></a><span class="co"># clean up</span></span>
<span id="cb22-23"><a href="hardware-cloud-services.html#cb22-23" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> hadoop-2.10.0.tar.gz</span>
<span id="cb22-24"><a href="hardware-cloud-services.html#cb22-24" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> hadoop-2.10.0.tar.gz.sha512</span></code></pre></div>
</div>
<div id="run-hadoop" class="section level3" number="3.2.4">
<h3><span class="header-section-number">3.2.4</span> Run Hadoop</h3>
<div class="sourceCode" id="cb23"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb23-1"><a href="hardware-cloud-services.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># check installation</span></span>
<span id="cb23-2"><a href="hardware-cloud-services.html#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/local/hadoop/bin/hadoop</span></span></code></pre></div>
</div>
<div id="run-example" class="section level3" number="3.2.5">
<h3><span class="header-section-number">3.2.5</span> Run example</h3>
<p>The basic Hadoop installation comes with a few examples for very typical map/reduce programs.<a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a> Below we replicate the same word-count example as shown in simple R code above.</p>
<p>In a first step, we create an input directory where we store the input file(s) to feed to Hadoop.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb24-1"><a href="hardware-cloud-services.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create directory for input files (typically text files)</span></span>
<span id="cb24-2"><a href="hardware-cloud-services.html#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> ~/input</span></code></pre></div>
<p>Then we add a textfile containing the same text as in the example as above (to make things simpler, we already remove special characters).</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb25-1"><a href="hardware-cloud-services.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;Simon is a friend of Becky</span></span>
<span id="cb25-2"><a href="hardware-cloud-services.html#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="st">Becky is a friend of Ann</span></span>
<span id="cb25-3"><a href="hardware-cloud-services.html#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="st">Ann is not a friend of Simon&quot;</span> <span class="op">&gt;&gt;</span>  ~/input/text.txt</span></code></pre></div>
<p>Now we can run the MapReduce/Hadoop word count as follows, storing the results in a new directory called <code>wordcount_example</code>.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb26-1"><a href="hardware-cloud-services.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># run mapreduce word count</span></span>
<span id="cb26-2"><a href="hardware-cloud-services.html#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/local/hadoop/bin/hadoop</span> jar /usr/local/hadoop/share/hadoop/mapreduce/hadoop-mapreduce-examples-2.10.0.jar wordcount ~/input ~/wc_example</span></code></pre></div>
<p>Show the output:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb27-1"><a href="hardware-cloud-services.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> ~/wc_example/<span class="pp">*</span></span></code></pre></div>
<pre><code>## Ann  2
## Becky    2
## Simon    2
## a    3
## friend   3
## is   3
## not  1
## of   3</code></pre>

</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="5">
<li id="fn5"><p>For a more detailed discussion of what <code>map</code> and <code>reduce</code> have <em>actually</em> to do with MapReduce see <a href="https://medium.com/@jkff/mapreduce-is-not-functional-programming-39109a4ba7b2">this post</a>.<a href="hardware-cloud-services.html#fnref5" class="footnote-back">↩︎</a></p></li>
<li id="fn6"><p>More sophisticated programs need to be custom made, written in Java.<a href="hardware-cloud-services.html#fnref6" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="hardware-computing-resources.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="software-toolbox.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 1
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bigdata.pdf", "bigdata.html", "bigdata.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
