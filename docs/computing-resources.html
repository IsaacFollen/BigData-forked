<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Computing Resources | Big Data Analytics</title>
  <meta name="description" content="A guide to practical big data analytics in R." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Computing Resources | Big Data Analytics" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="img/cover.png" />
  <meta property="og:description" content="A guide to practical big data analytics in R." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Computing Resources | Big Data Analytics" />
  
  <meta name="twitter:description" content="A guide to practical big data analytics in R." />
  <meta name="twitter:image" content="img/cover.png" />

<meta name="author" content="Ulrich Matter" />


<meta name="date" content="2022-01-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introduction.html"/>
<link rel="next" href="resource-allocation.html"/>
<script src="libs/header-attrs/header-attrs.js"></script>
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Big Data Analytics</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#example-of-computation-time-and-memory-allocation"><i class="fa fa-check"></i><b>1.1</b> Example of Computation Time and Memory Allocation</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="introduction.html"><a href="introduction.html#preparation"><i class="fa fa-check"></i><b>1.1.1</b> Preparation</a></li>
<li class="chapter" data-level="1.1.2" data-path="introduction.html"><a href="introduction.html#naïve-approach-ignorant-of-r"><i class="fa fa-check"></i><b>1.1.2</b> Naïve Approach (ignorant of R)</a></li>
<li class="chapter" data-level="1.1.3" data-path="introduction.html"><a href="introduction.html#improvement-1-pre-allocation-of-memory"><i class="fa fa-check"></i><b>1.1.3</b> Improvement 1: Pre-allocation of memory</a></li>
<li class="chapter" data-level="1.1.4" data-path="introduction.html"><a href="introduction.html#improvement-2-exploit-vectorization"><i class="fa fa-check"></i><b>1.1.4</b> Improvement 2: Exploit vectorization</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="computing-resources.html"><a href="computing-resources.html"><i class="fa fa-check"></i><b>2</b> Computing Resources</a>
<ul>
<li class="chapter" data-level="2.1" data-path="computing-resources.html"><a href="computing-resources.html#components-of-a-standard-computing-environment"><i class="fa fa-check"></i><b>2.1</b> Components of a standard computing environment</a></li>
<li class="chapter" data-level="2.2" data-path="computing-resources.html"><a href="computing-resources.html#units-of-informationdata-storage"><i class="fa fa-check"></i><b>2.2</b> Units of information/data storage</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="computing-resources.html"><a href="computing-resources.html#example-in-r-data-types-and-information-storage"><i class="fa fa-check"></i><b>2.2.1</b> Example in R: Data types and information storage</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="computing-resources.html"><a href="computing-resources.html#big-data-econometrics"><i class="fa fa-check"></i><b>2.3</b> Big Data econometrics</a></li>
<li class="chapter" data-level="2.4" data-path="computing-resources.html"><a href="computing-resources.html#example-fast-least-squares-regression"><i class="fa fa-check"></i><b>2.4</b> Example: Fast least squares regression</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="computing-resources.html"><a href="computing-resources.html#ols-as-a-point-of-reference"><i class="fa fa-check"></i><b>2.4.1</b> OLS as a point of reference</a></li>
<li class="chapter" data-level="2.4.2" data-path="computing-resources.html"><a href="computing-resources.html#the-uluru-algorithm-as-an-alternative-to-ols"><i class="fa fa-check"></i><b>2.4.2</b> The Uluru algorithm as an alternative to OLS</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="resource-allocation.html"><a href="resource-allocation.html"><i class="fa fa-check"></i><b>3</b> Resource allocation</a>
<ul>
<li class="chapter" data-level="3.1" data-path="resource-allocation.html"><a href="resource-allocation.html#case-study-parallel-processing"><i class="fa fa-check"></i><b>3.1</b> Case study: Parallel processing</a></li>
<li class="chapter" data-level="3.2" data-path="resource-allocation.html"><a href="resource-allocation.html#case-study-memory-allocation"><i class="fa fa-check"></i><b>3.2</b> Case study: Memory allocation</a></li>
<li class="chapter" data-level="3.3" data-path="resource-allocation.html"><a href="resource-allocation.html#beyond-memory"><i class="fa fa-check"></i><b>3.3</b> Beyond memory</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="advanced-r-programming.html"><a href="advanced-r-programming.html"><i class="fa fa-check"></i><b>4</b> Advanced R Programming</a>
<ul>
<li class="chapter" data-level="4.1" data-path="advanced-r-programming.html"><a href="advanced-r-programming.html#r-tools-to-investigate-performanceresource-allocation"><i class="fa fa-check"></i><b>4.1</b> R-tools to investigate performance/resource allocation</a></li>
<li class="chapter" data-level="4.2" data-path="advanced-r-programming.html"><a href="advanced-r-programming.html#r-tools-to-investigate-structures-and-types"><i class="fa fa-check"></i><b>4.2</b> R-tools to investigate structures and types</a></li>
<li class="chapter" data-level="4.3" data-path="advanced-r-programming.html"><a href="advanced-r-programming.html#data-types-and-memorystorage"><i class="fa fa-check"></i><b>4.3</b> Data types and memory/storage</a></li>
<li class="chapter" data-level="4.4" data-path="advanced-r-programming.html"><a href="advanced-r-programming.html#data-structures"><i class="fa fa-check"></i><b>4.4</b> Data structures</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="advanced-r-programming.html"><a href="advanced-r-programming.html#vectors-vs-factors-in-r"><i class="fa fa-check"></i><b>4.4.1</b> Vectors vs Factors in R</a></li>
<li class="chapter" data-level="4.4.2" data-path="advanced-r-programming.html"><a href="advanced-r-programming.html#matricesarrays"><i class="fa fa-check"></i><b>4.4.2</b> Matrices/Arrays</a></li>
<li class="chapter" data-level="4.4.3" data-path="advanced-r-programming.html"><a href="advanced-r-programming.html#data-frames-tibbles-and-data-tables"><i class="fa fa-check"></i><b>4.4.3</b> Data frames, tibbles, and data tables</a></li>
<li class="chapter" data-level="4.4.4" data-path="advanced-r-programming.html"><a href="advanced-r-programming.html#lists"><i class="fa fa-check"></i><b>4.4.4</b> Lists</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="advanced-r-programming.html"><a href="advanced-r-programming.html#programming-with-big-data-in-r"><i class="fa fa-check"></i><b>4.5</b> Programming with (Big) Data in R</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="advanced-r-programming.html"><a href="advanced-r-programming.html#typical-programming-tasks"><i class="fa fa-check"></i><b>4.5.1</b> Typical Programming Tasks</a></li>
<li class="chapter" data-level="4.5.2" data-path="advanced-r-programming.html"><a href="advanced-r-programming.html#building-blocks-for-programming-with-big-data"><i class="fa fa-check"></i><b>4.5.2</b> Building blocks for programming with big data</a></li>
<li class="chapter" data-level="4.5.3" data-path="advanced-r-programming.html"><a href="advanced-r-programming.html#writing-efficient-code"><i class="fa fa-check"></i><b>4.5.3</b> Writing efficient code</a></li>
<li class="chapter" data-level="4.5.4" data-path="advanced-r-programming.html"><a href="advanced-r-programming.html#r-beyond-r"><i class="fa fa-check"></i><b>4.5.4</b> R, beyond R</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="big-data-cleaning-and-transformation.html"><a href="big-data-cleaning-and-transformation.html"><i class="fa fa-check"></i><b>5</b> Big Data Cleaning and Transformation</a>
<ul>
<li class="chapter" data-level="5.1" data-path="big-data-cleaning-and-transformation.html"><a href="big-data-cleaning-and-transformation.html#out-of-memory-strategies"><i class="fa fa-check"></i><b>5.1</b> ‘Out-of-memory’ strategies</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="big-data-cleaning-and-transformation.html"><a href="big-data-cleaning-and-transformation.html#chunking-data-with-the-ff-package"><i class="fa fa-check"></i><b>5.1.1</b> Chunking data with the <code>ff</code>-package</a></li>
<li class="chapter" data-level="5.1.2" data-path="big-data-cleaning-and-transformation.html"><a href="big-data-cleaning-and-transformation.html#memory-mapping-with-bigmemory"><i class="fa fa-check"></i><b>5.1.2</b> Memory mapping with <code>bigmemory</code></a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="big-data-cleaning-and-transformation.html"><a href="big-data-cleaning-and-transformation.html#typical-cleaning-tasks"><i class="fa fa-check"></i><b>5.2</b> Typical cleaning tasks</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="big-data-cleaning-and-transformation.html"><a href="big-data-cleaning-and-transformation.html#data-preparation-with-ff"><i class="fa fa-check"></i><b>5.2.1</b> Data Preparation with <code>ff</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-aggregation.html"><a href="data-aggregation.html"><i class="fa fa-check"></i><b>6</b> Data Aggregation</a>
<ul>
<li class="chapter" data-level="6.1" data-path="data-aggregation.html"><a href="data-aggregation.html#data-aggregation-the-split-apply-combine-strategy"><i class="fa fa-check"></i><b>6.1</b> Data aggregation: The ‘split-apply-combine’ strategy</a></li>
<li class="chapter" data-level="6.2" data-path="data-aggregation.html"><a href="data-aggregation.html#data-aggregation-tutorial"><i class="fa fa-check"></i><b>6.2</b> Data aggregation tutorial</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="data-aggregation.html"><a href="data-aggregation.html#gathering-and-compilation-of-all-the-raw-data"><i class="fa fa-check"></i><b>6.2.1</b> Gathering and Compilation of all the raw data</a></li>
<li class="chapter" data-level="6.2.2" data-path="data-aggregation.html"><a href="data-aggregation.html#data-aggregation-with-chunked-data-files"><i class="fa fa-check"></i><b>6.2.2</b> Data aggregation with chunked data files</a></li>
<li class="chapter" data-level="6.2.3" data-path="data-aggregation.html"><a href="data-aggregation.html#high-speed-in-memory-data-aggregation-with-data.table"><i class="fa fa-check"></i><b>6.2.3</b> High-speed in-memory data aggregation with <code>data.table</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="data-storage-and-databases.html"><a href="data-storage-and-databases.html"><i class="fa fa-check"></i><b>7</b> Data Storage and Databases</a>
<ul>
<li class="chapter" data-level="7.1" data-path="data-storage-and-databases.html"><a href="data-storage-and-databases.html#big-data-storage"><i class="fa fa-check"></i><b>7.1</b> (Big) Data Storage</a></li>
<li class="chapter" data-level="7.2" data-path="data-storage-and-databases.html"><a href="data-storage-and-databases.html#rdbms-basics"><i class="fa fa-check"></i><b>7.2</b> RDBMS basics</a></li>
<li class="chapter" data-level="7.3" data-path="data-storage-and-databases.html"><a href="data-storage-and-databases.html#getting-started-with-rsqlite"><i class="fa fa-check"></i><b>7.3</b> Getting started with (R)SQLite</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="data-storage-and-databases.html"><a href="data-storage-and-databases.html#first-steps-in-sqlite"><i class="fa fa-check"></i><b>7.3.1</b> First steps in SQLite</a></li>
<li class="chapter" data-level="7.3.2" data-path="data-storage-and-databases.html"><a href="data-storage-and-databases.html#indices-and-joins"><i class="fa fa-check"></i><b>7.3.2</b> Indices and joins</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="data-storage-and-databases.html"><a href="data-storage-and-databases.html#sqlite-from-within-r"><i class="fa fa-check"></i><b>7.4</b> SQLite from within R</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="data-storage-and-databases.html"><a href="data-storage-and-databases.html#creating-a-new-database-with-rsqlite"><i class="fa fa-check"></i><b>7.4.1</b> Creating a new database with <code>RSQLite</code></a></li>
<li class="chapter" data-level="7.4.2" data-path="data-storage-and-databases.html"><a href="data-storage-and-databases.html#importing-data"><i class="fa fa-check"></i><b>7.4.2</b> Importing data</a></li>
<li class="chapter" data-level="7.4.3" data-path="data-storage-and-databases.html"><a href="data-storage-and-databases.html#issue-queries"><i class="fa fa-check"></i><b>7.4.3</b> Issue queries</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="big-data-visualization.html"><a href="big-data-visualization.html"><i class="fa fa-check"></i><b>8</b> (Big) Data Visualization</a>
<ul>
<li class="chapter" data-level="8.1" data-path="big-data-visualization.html"><a href="big-data-visualization.html#data-set"><i class="fa fa-check"></i><b>8.1</b> Data Set</a></li>
<li class="chapter" data-level="8.2" data-path="big-data-visualization.html"><a href="big-data-visualization.html#excursus-modify-and-create-themes"><i class="fa fa-check"></i><b>8.2</b> Excursus: modify and create themes</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="big-data-visualization.html"><a href="big-data-visualization.html#create-your-own-theme-simple-approach"><i class="fa fa-check"></i><b>8.2.1</b> Create your own theme: simple approach</a></li>
<li class="chapter" data-level="8.2.2" data-path="big-data-visualization.html"><a href="big-data-visualization.html#implementing-actual-themes-as-functions."><i class="fa fa-check"></i><b>8.2.2</b> Implementing actual themes as functions.</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="big-data-visualization.html"><a href="big-data-visualization.html#visualize-time-and-space"><i class="fa fa-check"></i><b>8.3</b> Visualize Time and Space</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="big-data-visualization.html"><a href="big-data-visualization.html#preparations"><i class="fa fa-check"></i><b>8.3.1</b> Preparations</a></li>
<li class="chapter" data-level="8.3.2" data-path="big-data-visualization.html"><a href="big-data-visualization.html#pick-up-and-drop-off-locations"><i class="fa fa-check"></i><b>8.3.2</b> Pick-up and drop-off locations</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="big-data-visualization.html"><a href="big-data-visualization.html#excursus-change-color-schemes"><i class="fa fa-check"></i><b>8.4</b> Excursus: change color schemes</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="cloud-services-for-big-data-analytics.html"><a href="cloud-services-for-big-data-analytics.html"><i class="fa fa-check"></i><b>9</b> Cloud Services for Big Data Analytics</a>
<ul>
<li class="chapter" data-level="9.1" data-path="cloud-services-for-big-data-analytics.html"><a href="cloud-services-for-big-data-analytics.html#scaling-up-in-the-cloud"><i class="fa fa-check"></i><b>9.1</b> Scaling up in the Cloud</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="cloud-services-for-big-data-analytics.html"><a href="cloud-services-for-big-data-analytics.html#parallelization-with-an-ec2-instance"><i class="fa fa-check"></i><b>9.1.1</b> Parallelization with an EC2 instance</a></li>
<li class="chapter" data-level="9.1.2" data-path="cloud-services-for-big-data-analytics.html"><a href="cloud-services-for-big-data-analytics.html#mass-storage-mariadb-on-an-ec2-instance"><i class="fa fa-check"></i><b>9.1.2</b> Mass Storage: MariaDB on an EC2 instance</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="cloud-services-for-big-data-analytics.html"><a href="cloud-services-for-big-data-analytics.html#distributed-systemsmapreduce"><i class="fa fa-check"></i><b>9.2</b> Distributed Systems/MapReduce</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="cloud-services-for-big-data-analytics.html"><a href="cloud-services-for-big-data-analytics.html#mapreduce-concept-illustration-in-r"><i class="fa fa-check"></i><b>9.2.1</b> Map/Reduce Concept: Illustration in R</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="cloud-services-for-big-data-analytics.html"><a href="cloud-services-for-big-data-analytics.html#hadoop-word-count"><i class="fa fa-check"></i><b>9.3</b> Hadoop Word Count</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="cloud-services-for-big-data-analytics.html"><a href="cloud-services-for-big-data-analytics.html#install-hadoop-on-ubuntupop_os-linux"><i class="fa fa-check"></i><b>9.3.1</b> Install Hadoop (on Ubuntu/Pop!_OS Linux)</a></li>
<li class="chapter" data-level="9.3.2" data-path="cloud-services-for-big-data-analytics.html"><a href="cloud-services-for-big-data-analytics.html#run-hadoop"><i class="fa fa-check"></i><b>9.3.2</b> Run Hadoop</a></li>
<li class="chapter" data-level="9.3.3" data-path="cloud-services-for-big-data-analytics.html"><a href="cloud-services-for-big-data-analytics.html#run-example"><i class="fa fa-check"></i><b>9.3.3</b> Run example</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="gpus-for-scientific-computing.html"><a href="gpus-for-scientific-computing.html"><i class="fa fa-check"></i><b>10</b> GPUs for Scientific Computing</a>
<ul>
<li class="chapter" data-level="10.1" data-path="gpus-for-scientific-computing.html"><a href="gpus-for-scientific-computing.html#gpus-in-r"><i class="fa fa-check"></i><b>10.1</b> GPUs in R</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="gpus-for-scientific-computing.html"><a href="gpus-for-scientific-computing.html#example-i-matrix-multiplication-comparison-gpur"><i class="fa fa-check"></i><b>10.1.1</b> Example I: Matrix multiplication comparison (<code>gpuR</code>)</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="gpus-for-scientific-computing.html"><a href="gpus-for-scientific-computing.html#gpus-and-machine-learning"><i class="fa fa-check"></i><b>10.2</b> GPUs and Machine Learning</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="gpus-for-scientific-computing.html"><a href="gpus-for-scientific-computing.html#tensorflowkeras-example-predict-housing-prices"><i class="fa fa-check"></i><b>10.2.1</b> Tensorflow/Keras example: predict housing prices</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="gpus-for-scientific-computing.html"><a href="gpus-for-scientific-computing.html#a-word-of-caution"><i class="fa fa-check"></i><b>10.3</b> A word of caution</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="applied-econometrics-with-apache-spark.html"><a href="applied-econometrics-with-apache-spark.html"><i class="fa fa-check"></i><b>11</b> Applied Econometrics with Apache Spark</a>
<ul>
<li class="chapter" data-level="11.1" data-path="applied-econometrics-with-apache-spark.html"><a href="applied-econometrics-with-apache-spark.html#spark-basics"><i class="fa fa-check"></i><b>11.1</b> Spark basics</a></li>
<li class="chapter" data-level="11.2" data-path="applied-econometrics-with-apache-spark.html"><a href="applied-econometrics-with-apache-spark.html#spark-in-r"><i class="fa fa-check"></i><b>11.2</b> Spark in R</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="applied-econometrics-with-apache-spark.html"><a href="applied-econometrics-with-apache-spark.html#data-import-and-summary-statistics"><i class="fa fa-check"></i><b>11.2.1</b> Data import and summary statistics</a></li>
<li class="chapter" data-level="11.2.2" data-path="applied-econometrics-with-apache-spark.html"><a href="applied-econometrics-with-apache-spark.html#regression-analysis-with-sparklyr"><i class="fa fa-check"></i><b>11.2.2</b> Regression analysis with <code>sparklyr</code></a></li>
</ul></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="appendix-a.html"><a href="appendix-a.html"><i class="fa fa-check"></i><b>A</b> Appendix A</a>
<ul>
<li class="chapter" data-level="A.1" data-path="appendix-a.html"><a href="appendix-a.html#github"><i class="fa fa-check"></i><b>A.1</b> GitHub</a>
<ul>
<li class="chapter" data-level="A.1.1" data-path="appendix-a.html"><a href="appendix-a.html#initiate-a-new-repository"><i class="fa fa-check"></i><b>A.1.1</b> Initiate a new repository</a></li>
<li class="chapter" data-level="A.1.2" data-path="appendix-a.html"><a href="appendix-a.html#clone-this-courses-repository"><i class="fa fa-check"></i><b>A.1.2</b> Clone this course’s repository</a></li>
<li class="chapter" data-level="A.1.3" data-path="appendix-a.html"><a href="appendix-a.html#fork-this-courses-repository"><i class="fa fa-check"></i><b>A.1.3</b> Fork this course’s repository</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="B" data-path="appendix-b.html"><a href="appendix-b.html"><i class="fa fa-check"></i><b>B</b> Appendix B</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://umatter.github.io" target="blank">umatter.github.io</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Big Data Analytics</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="computing-resources" class="section level1" number="2">
<h1><span class="header-section-number">Chapter 2</span> Computing Resources</h1>
<div id="components-of-a-standard-computing-environment" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Components of a standard computing environment</h2>
<p>Figure <a href="computing-resources.html#fig:components">2.1</a> illustrates the key components of a standard computing environment to process digital data. In our case, these components serve the purpose of computing a statistic, given a large data set as input.</p>
<div class="figure" style="text-align: center"><span id="fig:components"></span>
<img src="img/03_script-hardware_w.jpg" alt="Basic components of a standard computing environment." width="60%" />
<p class="caption">
Figure 2.1: Basic components of a standard computing environment.
</p>
</div>

<ul>
<li><p>The component actually <em>processing</em> data is the Central Processing Unit (CPU). When using R to process data, R commands are translated into complex combinations of a small set of basic operations which the <em>CPU</em> then executes.</p></li>
<li><p>In order to work with data (e.g., in R), it first has to be loaded into the <em>memory</em> of our computer. More specifically, into the Random Access Memory (<em>RAM</em>). Typically, data is only loaded in the RAM as long as we work with it.</p></li>
<li><p><em>Mass Storage</em> refers to the type of computer memory we use to store data in the long run. This is what we call the <em>hard drive</em> or <em>hard disk</em>. In these days, the relevant hard disk is actually often not the one physically built into our computer but a hard disk ‘in the cloud’ (built into a server to which we connect over the Internet).</p></li>
</ul>
<p>Very simply put, the difference between ‘data analytics’ and ‘Big Data analytics’ is that in the latter case, the standard usage of one or several of these components fails or works very inefficiently because the amount of data overwhelms its normal capacity.</p>
<p>From this hardware-perspective, there are two basic strategies to cope with the situation that one of these components is overwhelmed by the amount of data:</p>
<ul>
<li><em>Scale up (‘horizontal scaling’)</em>: Extend the physical capacity of the affected component by building a system with large RAM shared between applications. This sounds like a trivial solution (‘if RAM is too small, buy more RAM…’), but in practice it can be very expensive.</li>
<li><em>Scale out (‘vertical scaling’)</em>: Distribute the workload over several computers (or separate components of a system).</li>
</ul>
<p>From a software-perspective, there are many (context-specific) strategies that can help us to use the resources available more efficiently in order to process large amounts of data. In the context of computing statistics based on big data, this can involve:</p>
<ul>
<li>Implementing the computation of a given statistical procedure in a more efficient way (make better use of a given programming language or choose another programming language).</li>
<li>Choosing/implementing a more efficient statistical procedure/algorithm (see, e.g., the <em>Uluru</em> algorithm).</li>
<li>At a lower level, improving how the system allocates resources.</li>
</ul>
</div>
<div id="units-of-informationdata-storage" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Units of information/data storage</h2>
<p>The smallest unit of information in computing/digital data is called a <em>bit</em> (from <em>bi</em>nary dig<em>it</em>; abbrev. ‘b’) and can take one of two (symbolic) values, either a <code>0</code> or a <code>1</code> (“off” or “on”). Consider, for example, the decimal number <code>139</code>. Written in the binary system, <code>139</code> corresponds to the binary number <code>10001011</code>. In order to store this number on a hard disk, we require a capacity of 8 bits, or one <em>byte</em> (1 byte = 8 bits; abbrev. ‘B’). Historically, one byte encoded a single character of text (i.e., in the ASCII character encoding system). 4 bytes (or 32 bits) are called a <em>word</em>. When thinking of a given data set in its raw/binary representation, we can simply think of it as a row of <code>0</code>s and <code>1</code>s, as illustrated in the following figure.</p>
<div class="figure" style="text-align: center"><span id="fig:bitbyteword"></span>
<img src="img/03_store-bitbyteword.png" alt="Writing data stored in RAM to a Mass Storage device (hard drive). Figure by Murrell (2009) (licensed under CC BY-NC-SA 3.0 NZ)." width="50%" />
<p class="caption">
Figure 2.2: Writing data stored in RAM to a Mass Storage device (hard drive). Figure by <span class="citation"><a href="references.html#ref-murrell_2009" role="doc-biblioref">Murrell</a> (<a href="references.html#ref-murrell_2009" role="doc-biblioref">2009</a>)</span> (licensed under CC BY-NC-SA 3.0 NZ).
</p>
</div>

<p>Bigger units for storage capacity usually build on bytes:</p>
<ul>
<li><span class="math inline">\(1 \text{ kilobyte (KB)} = 1000^{1} \approx 2^{10} \text{ bytes}\)</span></li>
<li><span class="math inline">\(1 \text{ megabyte (MB)} = 1000^{2} \approx 2^{20} \text{ bytes}\)</span></li>
<li><span class="math inline">\(1 \text{ gigabyte (GB)} = 1000^{3} \approx 2^{30} \text{ bytes}\)</span></li>
<li><span class="math inline">\(1 \text{ terabyte (TB)} = 1000^{4} \approx 2^{40} \text{ bytes}\)</span></li>
<li><span class="math inline">\(1 \text{ petabyte (PB)} = 1000^{5} \approx 2^{50} \text{ bytes}\)</span></li>
<li><span class="math inline">\(1 \text{ exabyte (EB)} = 1000^{6} \approx 2^{60} \text{ bytes}\)</span></li>
<li><span class="math inline">\(1 \text{ zettabyte (ZB)} = 1000^{7} \approx 2^{70} \text{ bytes}\)</span></li>
</ul>
<p><span class="math display">\[1 ZB = 1000000000000000000000\text{ bytes} = 1 \text{ billion terabytes} = 1 \text{ trillion gigabytes}.\]</span></p>
<div id="example-in-r-data-types-and-information-storage" class="section level3" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> Example in R: Data types and information storage</h3>
<p>Given the fact that computers only understand <code>0</code>s and <code>1</code>s, different approaches are taken to map these digital values to other symbols or images (text, decimal numbers, pictures, etc.) that we humans can more easily make sense of. Regarding text and numbers, these mappings involve <em>character encodings</em> (in which combinations of <code>0</code>s and <code>1</code>s represent a character in a specific alphabet) and <em>data types</em>.</p>
<p>Let’s illustrate the main concepts with the simple numerical example from above. When we see the decimal number <code>139</code> written somewhere, we know that it means ‘one-hundred-and-thirty-nine.’ The fact that our computer is able to print <code>139</code> on the screen means that our computer can somehow map a sequence of <code>0</code>s and <code>1</code>s to the symbols <code>1</code>, <code>3</code>, and <code>9</code>. Depending on what we want to do with the data value <code>139</code> on our computer, there are different ways of how the computer can represent this value internally. Inter alia, we could load it into RAM as a <em>string</em> (‘text’/‘character’) or as an <em>integer</em> (‘natural number’) or <em>double</em> (numeric, floating point number). All of them can be printed on screen but only the latter two can be used for arithmetic computations. This concept can easily be illustrated in R.</p>
<p>We initiate a new variable with the value <code>139</code>. By using this syntax, R by default initiates the variable as an object of type <code>double</code>. We then can use this variable in arithmetic operations.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="computing-resources.html#cb41-1" aria-hidden="true" tabindex="-1"></a>my_number <span class="ot">&lt;-</span> <span class="dv">139</span></span>
<span id="cb41-2"><a href="computing-resources.html#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="co"># check the class</span></span>
<span id="cb41-3"><a href="computing-resources.html#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(my_number)</span></code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="computing-resources.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># arithmetic</span></span>
<span id="cb43-2"><a href="computing-resources.html#cb43-2" aria-hidden="true" tabindex="-1"></a>my_number<span class="sc">*</span><span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] 278</code></pre>
<p>When we change the <em>data type</em> to ‘character’ (string) such operations are not possible.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="computing-resources.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># change and check type/class</span></span>
<span id="cb45-2"><a href="computing-resources.html#cb45-2" aria-hidden="true" tabindex="-1"></a>my_number_string <span class="ot">&lt;-</span> <span class="fu">as.character</span>(my_number)</span>
<span id="cb45-3"><a href="computing-resources.html#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(my_number_string)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="computing-resources.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># try to multiply</span></span>
<span id="cb47-2"><a href="computing-resources.html#cb47-2" aria-hidden="true" tabindex="-1"></a>my_number_string<span class="sc">*</span><span class="dv">2</span></span></code></pre></div>
<pre><code>## Error in my_number_string * 2: non-numeric argument to binary operator</code></pre>
<p>If we change the variable to type <code>integer</code>, we can still use math operators.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="computing-resources.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># change and check type/class</span></span>
<span id="cb49-2"><a href="computing-resources.html#cb49-2" aria-hidden="true" tabindex="-1"></a>my_number_int <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(my_number)</span>
<span id="cb49-3"><a href="computing-resources.html#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(my_number_int)</span></code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="computing-resources.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># arithmetics</span></span>
<span id="cb51-2"><a href="computing-resources.html#cb51-2" aria-hidden="true" tabindex="-1"></a>my_number_int<span class="sc">*</span><span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] 278</code></pre>
<p>Having all variables in the right type is relevant for data analytics with all kind of sample sizes. However, given the fact that different data types have to be represented differently internally, different types might take up more or less memory and therefore substantially affect the performance when dealing with massive amounts of data.</p>
<p>We can illustrate this point with <code>object.size()</code>:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="computing-resources.html#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">object.size</span>(<span class="st">&quot;139&quot;</span>)</span></code></pre></div>
<pre><code>## 112 bytes</code></pre>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="computing-resources.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">object.size</span>(<span class="dv">139</span>)</span></code></pre></div>
<pre><code>## 56 bytes</code></pre>
</div>
</div>
<div id="big-data-econometrics" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> Big Data econometrics</h2>
<!-- Finally, even if all of the techniques outlined above are taken into account in order to optimize the implementation of a statistical analysis of large data sets in R (or any other language), there might be room for improvement.  -->
<p>When thinking about how to approach a data analytics task based on large amounts of data, it is helpful to consider two key aspects concerning the computational burden involved. <span class="math inline">\((i)\)</span> how is the statistic we have in mind computed. That is, what is the formal definition of the statistic (and how computationally demanding is it)? And <span class="math inline">\((ii)\)</span>, given a definition of the statistic, how does the program/software/language implement the computation thereof?</p>
<p>Regarding the former, we might realize that there is an alternative statistical procedure that would provide essentially the same output but that happens to be more efficient (here: computationally efficient in contrast to statistically efficient). The latter point is a question of how to efficiently implement the given statistical procedure in your computing environment (taking into consideration the computer’s available resources: CPU, RAM, etc.).</p>
<p>Below, we look at both of these two aspects by means of illustrative examples.</p>
</div>
<div id="example-fast-least-squares-regression" class="section level2" number="2.4">
<h2><span class="header-section-number">2.4</span> Example: Fast least squares regression</h2>
<p>As an illustration of how an alternative statistical procedure can speed up our analysis, we look at one such procedure that has recently been developed to estimate linear models when the classical OLS estimator is too computationally intense for very large samples: The <em>Uluru</em> algorithm <span class="citation">(<a href="references.html#ref-dhillon_2013" role="doc-biblioref">Dhillon et al. 2013</a>)</span>.</p>
<div id="ols-as-a-point-of-reference" class="section level3" number="2.4.1">
<h3><span class="header-section-number">2.4.1</span> OLS as a point of reference</h3>
<p>Recall the OLS estimator in matrix notation, given the linear model <span class="math inline">\(\mathbf{y}=\mathbf{X}\beta + \epsilon\)</span>:</p>
<p><span class="math inline">\(\hat{\beta}_{OLS} = (\mathbf{X}^\intercal\mathbf{X})^{-1}\mathbf{X}^{\intercal}\mathbf{y}\)</span>.</p>
<p>In order to compute <span class="math inline">\(\hat{\beta}_{OLS}\)</span>, we have to compute <span class="math inline">\((\mathbf{X}^\intercal\mathbf{X})^{-1}\)</span>, which implies a computationally expensive matrix inversion.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> If our data set is large, <span class="math inline">\(\mathbf{X}\)</span> is large and the inversion can take up a lot of computation time. Moreover, the inversion and matrix multiplication to get <span class="math inline">\(\hat{\beta}_{OLS}\)</span> needs a lot of memory. In practice, it might well be that the estimation of a linear model via OLS with the standard approach in R (<code>lm()</code>) brings a computer to its knees, as there is not enough RAM available.</p>
<p>To further illustrate the point, we implement the OLS estimator in R.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="computing-resources.html#cb57-1" aria-hidden="true" tabindex="-1"></a>beta_ols <span class="ot">&lt;-</span> </span>
<span id="cb57-2"><a href="computing-resources.html#cb57-2" aria-hidden="true" tabindex="-1"></a>     <span class="cf">function</span>(X, y) {</span>
<span id="cb57-3"><a href="computing-resources.html#cb57-3" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb57-4"><a href="computing-resources.html#cb57-4" aria-hidden="true" tabindex="-1"></a>          <span class="co"># compute cross products and inverse</span></span>
<span id="cb57-5"><a href="computing-resources.html#cb57-5" aria-hidden="true" tabindex="-1"></a>          XXi <span class="ot">&lt;-</span> <span class="fu">solve</span>(<span class="fu">crossprod</span>(X,X))</span>
<span id="cb57-6"><a href="computing-resources.html#cb57-6" aria-hidden="true" tabindex="-1"></a>          Xy <span class="ot">&lt;-</span> <span class="fu">crossprod</span>(X, y) </span>
<span id="cb57-7"><a href="computing-resources.html#cb57-7" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb57-8"><a href="computing-resources.html#cb57-8" aria-hidden="true" tabindex="-1"></a>          <span class="fu">return</span>( XXi  <span class="sc">%*%</span> Xy )</span>
<span id="cb57-9"><a href="computing-resources.html#cb57-9" aria-hidden="true" tabindex="-1"></a>     }</span></code></pre></div>
<p>Now, we will test our OLS estimator function with a few (pseudo) random numbers in a Monte Carlo study. First, we set the sample size parameters <code>n</code> (how many observations shall our pseudo sample have?) and <code>p</code> (how many variables shall describe these observations?) and initiate the data set <code>X</code>.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="computing-resources.html#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># set parameter values</span></span>
<span id="cb58-2"><a href="computing-resources.html#cb58-2" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">10000000</span></span>
<span id="cb58-3"><a href="computing-resources.html#cb58-3" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="dv">4</span> </span>
<span id="cb58-4"><a href="computing-resources.html#cb58-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-5"><a href="computing-resources.html#cb58-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate sample based on Monte Carlo</span></span>
<span id="cb58-6"><a href="computing-resources.html#cb58-6" aria-hidden="true" tabindex="-1"></a><span class="co"># generate a design matrix (~ our &#39;dataset&#39;) with four variables and 10000 observations</span></span>
<span id="cb58-7"><a href="computing-resources.html#cb58-7" aria-hidden="true" tabindex="-1"></a>X <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">rnorm</span>(n<span class="sc">*</span>p, <span class="at">mean =</span> <span class="dv">10</span>), <span class="at">ncol =</span> p)</span>
<span id="cb58-8"><a href="computing-resources.html#cb58-8" aria-hidden="true" tabindex="-1"></a><span class="co"># add column for intercept</span></span>
<span id="cb58-9"><a href="computing-resources.html#cb58-9" aria-hidden="true" tabindex="-1"></a>X <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="fu">rep</span>(<span class="dv">1</span>, n), X)</span></code></pre></div>
<p>Now we define how the real linear model looks like that we have in mind and compute the output <code>y</code> of this model, given the input <code>X</code>.<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a></p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="computing-resources.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># MC model</span></span>
<span id="cb59-2"><a href="computing-resources.html#cb59-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">+</span> <span class="fl">1.5</span><span class="sc">*</span>X[,<span class="dv">2</span>] <span class="sc">+</span> <span class="dv">4</span><span class="sc">*</span>X[,<span class="dv">3</span>] <span class="sc">-</span> <span class="fl">3.5</span><span class="sc">*</span>X[,<span class="dv">4</span>] <span class="sc">+</span> <span class="fl">0.5</span><span class="sc">*</span>X[,<span class="dv">5</span>] <span class="sc">+</span> <span class="fu">rnorm</span>(n)</span></code></pre></div>
<p>Finally, we test our <code>beta_ols</code> function.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="computing-resources.html#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># apply the ols estimator</span></span>
<span id="cb60-2"><a href="computing-resources.html#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="fu">beta_ols</span>(X, y)</span></code></pre></div>
<pre><code>##         [,1]
## [1,]  2.0023
## [2,]  1.4996
## [3,]  4.0003
## [4,] -3.4999
## [5,]  0.4998</code></pre>
</div>
<div id="the-uluru-algorithm-as-an-alternative-to-ols" class="section level3" number="2.4.2">
<h3><span class="header-section-number">2.4.2</span> The Uluru algorithm as an alternative to OLS</h3>
<p>Following <span class="citation"><a href="references.html#ref-dhillon_2013" role="doc-biblioref">Dhillon et al.</a> (<a href="references.html#ref-dhillon_2013" role="doc-biblioref">2013</a>)</span>, we implement a procedure to compute <span class="math inline">\(\hat{\beta}_{Uluru}\)</span>:</p>
<p><span class="math display">\[\hat{\beta}_{Uluru}=\hat{\beta}_{FS} + \hat{\beta}_{correct}\]</span>, where
<span class="math display">\[\hat{\beta}_{FS} = (\mathbf{X}_{subs}^\intercal\mathbf{X}_{subs})^{-1}\mathbf{X}_{subs}^{\intercal}\mathbf{y}_{subs}\]</span>, and
<span class="math display">\[\hat{\beta}_{correct}= \frac{n_{subs}}{n_{rem}} \cdot (\mathbf{X}_{subs}^\intercal\mathbf{X}_{subs})^{-1} \mathbf{X}_{rem}^{\intercal}\mathbf{R}_{rem}\]</span>, and
<span class="math display">\[\mathbf{R}_{rem} = \mathbf{Y}_{rem} - \mathbf{X}_{rem}  \cdot \hat{\beta}_{FS}\]</span>.</p>
<p>The key idea behind this is that the computational bottleneck of the OLS estimator, the cross product and matrix inversion,<span class="math inline">\((\mathbf{X}^\intercal\mathbf{X})^{-1}\)</span>, is only computed on a sub-sample (<span class="math inline">\(X_{subs}\)</span>, etc.), not the entire data set. However, the remainder of the data set is also taken into consideration (in order to correct a bias arising from the sub-sampling). Again, we implement the estimator in R to further illustrate this point.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="computing-resources.html#cb62-1" aria-hidden="true" tabindex="-1"></a>beta_uluru <span class="ot">&lt;-</span></span>
<span id="cb62-2"><a href="computing-resources.html#cb62-2" aria-hidden="true" tabindex="-1"></a>     <span class="cf">function</span>(X_subs, y_subs, X_rem, y_rem) {</span>
<span id="cb62-3"><a href="computing-resources.html#cb62-3" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb62-4"><a href="computing-resources.html#cb62-4" aria-hidden="true" tabindex="-1"></a>          <span class="co"># compute beta_fs (this is simply OLS applied to the subsample)</span></span>
<span id="cb62-5"><a href="computing-resources.html#cb62-5" aria-hidden="true" tabindex="-1"></a>          XXi_subs <span class="ot">&lt;-</span> <span class="fu">solve</span>(<span class="fu">crossprod</span>(X_subs, X_subs))</span>
<span id="cb62-6"><a href="computing-resources.html#cb62-6" aria-hidden="true" tabindex="-1"></a>          Xy_subs <span class="ot">&lt;-</span> <span class="fu">crossprod</span>(X_subs, y_subs)</span>
<span id="cb62-7"><a href="computing-resources.html#cb62-7" aria-hidden="true" tabindex="-1"></a>          b_fs <span class="ot">&lt;-</span> XXi_subs  <span class="sc">%*%</span> Xy_subs</span>
<span id="cb62-8"><a href="computing-resources.html#cb62-8" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb62-9"><a href="computing-resources.html#cb62-9" aria-hidden="true" tabindex="-1"></a>          <span class="co"># compute \mathbf{R}_{rem}</span></span>
<span id="cb62-10"><a href="computing-resources.html#cb62-10" aria-hidden="true" tabindex="-1"></a>          R_rem <span class="ot">&lt;-</span> y_rem <span class="sc">-</span> X_rem <span class="sc">%*%</span> b_fs</span>
<span id="cb62-11"><a href="computing-resources.html#cb62-11" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb62-12"><a href="computing-resources.html#cb62-12" aria-hidden="true" tabindex="-1"></a>          <span class="co"># compute \hat{\beta}_{correct}</span></span>
<span id="cb62-13"><a href="computing-resources.html#cb62-13" aria-hidden="true" tabindex="-1"></a>          b_correct <span class="ot">&lt;-</span> (<span class="fu">nrow</span>(X_subs)<span class="sc">/</span>(<span class="fu">nrow</span>(X_rem))) <span class="sc">*</span> XXi_subs <span class="sc">%*%</span> <span class="fu">crossprod</span>(X_rem, R_rem)</span>
<span id="cb62-14"><a href="computing-resources.html#cb62-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-15"><a href="computing-resources.html#cb62-15" aria-hidden="true" tabindex="-1"></a>          <span class="co"># beta uluru       </span></span>
<span id="cb62-16"><a href="computing-resources.html#cb62-16" aria-hidden="true" tabindex="-1"></a>          <span class="fu">return</span>(b_fs <span class="sc">+</span> b_correct)</span>
<span id="cb62-17"><a href="computing-resources.html#cb62-17" aria-hidden="true" tabindex="-1"></a>     }</span></code></pre></div>
<p>Test it with the same input as above:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="computing-resources.html#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># set size of subsample</span></span>
<span id="cb63-2"><a href="computing-resources.html#cb63-2" aria-hidden="true" tabindex="-1"></a>n_subs <span class="ot">&lt;-</span> <span class="dv">1000</span></span>
<span id="cb63-3"><a href="computing-resources.html#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="co"># select subsample and remainder</span></span>
<span id="cb63-4"><a href="computing-resources.html#cb63-4" aria-hidden="true" tabindex="-1"></a>n_obs <span class="ot">&lt;-</span> <span class="fu">nrow</span>(X)</span>
<span id="cb63-5"><a href="computing-resources.html#cb63-5" aria-hidden="true" tabindex="-1"></a>X_subs <span class="ot">&lt;-</span> X[1L<span class="sc">:</span>n_subs,]</span>
<span id="cb63-6"><a href="computing-resources.html#cb63-6" aria-hidden="true" tabindex="-1"></a>y_subs <span class="ot">&lt;-</span> y[1L<span class="sc">:</span>n_subs]</span>
<span id="cb63-7"><a href="computing-resources.html#cb63-7" aria-hidden="true" tabindex="-1"></a>X_rem <span class="ot">&lt;-</span> X[(n_subs<span class="sc">+</span>1L)<span class="sc">:</span>n_obs,]</span>
<span id="cb63-8"><a href="computing-resources.html#cb63-8" aria-hidden="true" tabindex="-1"></a>y_rem <span class="ot">&lt;-</span> y[(n_subs<span class="sc">+</span>1L)<span class="sc">:</span>n_obs]</span>
<span id="cb63-9"><a href="computing-resources.html#cb63-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-10"><a href="computing-resources.html#cb63-10" aria-hidden="true" tabindex="-1"></a><span class="co"># apply the uluru estimator</span></span>
<span id="cb63-11"><a href="computing-resources.html#cb63-11" aria-hidden="true" tabindex="-1"></a><span class="fu">beta_uluru</span>(X_subs, y_subs, X_rem, y_rem)</span></code></pre></div>
<pre><code>##         [,1]
## [1,]  1.9396
## [2,]  1.5001
## [3,]  4.0030
## [4,] -3.4973
## [5,]  0.5001</code></pre>
<p>This looks quite good already. Let’s have a closer look with a little Monte Carlo study. The aim of the simulation study is to visualize the difference between the classical OLS approach and the <em>Uluru</em> algorithm with regard to bias and time complexity if we increase the sub-sample size in <em>Uluru</em>. For simplicity, we only look at the first estimated coefficient <span class="math inline">\(\beta_{1}\)</span>.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="computing-resources.html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># define subsamples</span></span>
<span id="cb65-2"><a href="computing-resources.html#cb65-2" aria-hidden="true" tabindex="-1"></a>n_subs_sizes <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1000</span>, <span class="at">to =</span> <span class="dv">500000</span>, <span class="at">by=</span><span class="dv">10000</span>)</span>
<span id="cb65-3"><a href="computing-resources.html#cb65-3" aria-hidden="true" tabindex="-1"></a>n_runs <span class="ot">&lt;-</span> <span class="fu">length</span>(n_subs_sizes)</span>
<span id="cb65-4"><a href="computing-resources.html#cb65-4" aria-hidden="true" tabindex="-1"></a><span class="co"># compute uluru result, stop time</span></span>
<span id="cb65-5"><a href="computing-resources.html#cb65-5" aria-hidden="true" tabindex="-1"></a>mc_results <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="cn">NA</span>, n_runs)</span>
<span id="cb65-6"><a href="computing-resources.html#cb65-6" aria-hidden="true" tabindex="-1"></a>mc_times <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="cn">NA</span>, n_runs)</span>
<span id="cb65-7"><a href="computing-resources.html#cb65-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>n_runs) {</span>
<span id="cb65-8"><a href="computing-resources.html#cb65-8" aria-hidden="true" tabindex="-1"></a>     <span class="co"># set size of subsample</span></span>
<span id="cb65-9"><a href="computing-resources.html#cb65-9" aria-hidden="true" tabindex="-1"></a>     n_subs <span class="ot">&lt;-</span> n_subs_sizes[i]</span>
<span id="cb65-10"><a href="computing-resources.html#cb65-10" aria-hidden="true" tabindex="-1"></a>     <span class="co"># select subsample and remainder</span></span>
<span id="cb65-11"><a href="computing-resources.html#cb65-11" aria-hidden="true" tabindex="-1"></a>     n_obs <span class="ot">&lt;-</span> <span class="fu">nrow</span>(X)</span>
<span id="cb65-12"><a href="computing-resources.html#cb65-12" aria-hidden="true" tabindex="-1"></a>     X_subs <span class="ot">&lt;-</span> X[1L<span class="sc">:</span>n_subs,]</span>
<span id="cb65-13"><a href="computing-resources.html#cb65-13" aria-hidden="true" tabindex="-1"></a>     y_subs <span class="ot">&lt;-</span> y[1L<span class="sc">:</span>n_subs]</span>
<span id="cb65-14"><a href="computing-resources.html#cb65-14" aria-hidden="true" tabindex="-1"></a>     X_rem <span class="ot">&lt;-</span> X[(n_subs<span class="sc">+</span>1L)<span class="sc">:</span>n_obs,]</span>
<span id="cb65-15"><a href="computing-resources.html#cb65-15" aria-hidden="true" tabindex="-1"></a>     y_rem <span class="ot">&lt;-</span> y[(n_subs<span class="sc">+</span>1L)<span class="sc">:</span>n_obs]</span>
<span id="cb65-16"><a href="computing-resources.html#cb65-16" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb65-17"><a href="computing-resources.html#cb65-17" aria-hidden="true" tabindex="-1"></a>     mc_results[i] <span class="ot">&lt;-</span> <span class="fu">beta_uluru</span>(X_subs, y_subs, X_rem, y_rem)[<span class="dv">2</span>] <span class="co"># the first element is the intercept</span></span>
<span id="cb65-18"><a href="computing-resources.html#cb65-18" aria-hidden="true" tabindex="-1"></a>     mc_times[i] <span class="ot">&lt;-</span> <span class="fu">system.time</span>(<span class="fu">beta_uluru</span>(X_subs, y_subs, X_rem, y_rem))[<span class="dv">3</span>]</span>
<span id="cb65-19"><a href="computing-resources.html#cb65-19" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb65-20"><a href="computing-resources.html#cb65-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb65-21"><a href="computing-resources.html#cb65-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-22"><a href="computing-resources.html#cb65-22" aria-hidden="true" tabindex="-1"></a><span class="co"># compute ols results and ols time</span></span>
<span id="cb65-23"><a href="computing-resources.html#cb65-23" aria-hidden="true" tabindex="-1"></a>ols_time <span class="ot">&lt;-</span> <span class="fu">system.time</span>(<span class="fu">beta_ols</span>(X, y))</span>
<span id="cb65-24"><a href="computing-resources.html#cb65-24" aria-hidden="true" tabindex="-1"></a>ols_res <span class="ot">&lt;-</span> <span class="fu">beta_ols</span>(X, y)[<span class="dv">2</span>]</span></code></pre></div>
<p>Let’s visualize the comparison with OLS.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="computing-resources.html#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load packages</span></span>
<span id="cb66-2"><a href="computing-resources.html#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb66-3"><a href="computing-resources.html#cb66-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-4"><a href="computing-resources.html#cb66-4" aria-hidden="true" tabindex="-1"></a><span class="co"># prepare data to plot</span></span>
<span id="cb66-5"><a href="computing-resources.html#cb66-5" aria-hidden="true" tabindex="-1"></a>plotdata <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">beta1 =</span> mc_results,</span>
<span id="cb66-6"><a href="computing-resources.html#cb66-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">time_elapsed =</span> mc_times,</span>
<span id="cb66-7"><a href="computing-resources.html#cb66-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">subs_size =</span> n_subs_sizes)</span></code></pre></div>
<p>First, let’s look at the time used estimate the linear model.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="computing-resources.html#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(plotdata, <span class="fu">aes</span>(<span class="at">x =</span> subs_size, <span class="at">y =</span> time_elapsed)) <span class="sc">+</span></span>
<span id="cb67-2"><a href="computing-resources.html#cb67-2" aria-hidden="true" tabindex="-1"></a>     <span class="fu">geom_point</span>(<span class="at">color=</span><span class="st">&quot;darkgreen&quot;</span>) <span class="sc">+</span> </span>
<span id="cb67-3"><a href="computing-resources.html#cb67-3" aria-hidden="true" tabindex="-1"></a>     <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> ols_time[<span class="dv">3</span>],</span>
<span id="cb67-4"><a href="computing-resources.html#cb67-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">color =</span> <span class="st">&quot;red&quot;</span>, </span>
<span id="cb67-5"><a href="computing-resources.html#cb67-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb67-6"><a href="computing-resources.html#cb67-6" aria-hidden="true" tabindex="-1"></a>     <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb67-7"><a href="computing-resources.html#cb67-7" aria-hidden="true" tabindex="-1"></a>     <span class="fu">ylab</span>(<span class="st">&quot;Time elapsed&quot;</span>) <span class="sc">+</span></span>
<span id="cb67-8"><a href="computing-resources.html#cb67-8" aria-hidden="true" tabindex="-1"></a>     <span class="fu">xlab</span>(<span class="st">&quot;Subsample size&quot;</span>)</span></code></pre></div>
<p><img src="bigdata_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
<p>The horizontal red line indicates the computation time for estimation via OLS, the green points indicate the computation time for the estimation via the Ulruru algorithm. Note that even for large sub-samples, the computation time is substantially lower than for OLS.</p>
<p>Finally, let’s have a look at how close the results are to OLS.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="computing-resources.html#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(plotdata, <span class="fu">aes</span>(<span class="at">x =</span> subs_size, <span class="at">y =</span> beta1)) <span class="sc">+</span></span>
<span id="cb68-2"><a href="computing-resources.html#cb68-2" aria-hidden="true" tabindex="-1"></a>     <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> ols_res,</span>
<span id="cb68-3"><a href="computing-resources.html#cb68-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">color =</span> <span class="st">&quot;red&quot;</span>, </span>
<span id="cb68-4"><a href="computing-resources.html#cb68-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb68-5"><a href="computing-resources.html#cb68-5" aria-hidden="true" tabindex="-1"></a>       <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="fl">1.5</span>,</span>
<span id="cb68-6"><a href="computing-resources.html#cb68-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">color =</span> <span class="st">&quot;green&quot;</span>,</span>
<span id="cb68-7"><a href="computing-resources.html#cb68-7" aria-hidden="true" tabindex="-1"></a>                <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb68-8"><a href="computing-resources.html#cb68-8" aria-hidden="true" tabindex="-1"></a>     <span class="fu">geom_point</span>(<span class="at">color=</span><span class="st">&quot;darkgreen&quot;</span>) <span class="sc">+</span> </span>
<span id="cb68-9"><a href="computing-resources.html#cb68-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-10"><a href="computing-resources.html#cb68-10" aria-hidden="true" tabindex="-1"></a>     <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb68-11"><a href="computing-resources.html#cb68-11" aria-hidden="true" tabindex="-1"></a>     <span class="fu">ylab</span>(<span class="st">&quot;Estimated coefficient&quot;</span>) <span class="sc">+</span></span>
<span id="cb68-12"><a href="computing-resources.html#cb68-12" aria-hidden="true" tabindex="-1"></a>     <span class="fu">xlab</span>(<span class="st">&quot;Subsample size&quot;</span>)</span></code></pre></div>
<p><img src="bigdata_files/figure-html/unnamed-chunk-29-1.png" width="672" /></p>
<p>The horizontal red line indicates the size of the estimated coefficient, when using OLS. The horizontal green line indicates the size of the actual coefficient. The green points indicate the size of the same coefficient estimated by the Uluru algorithm for different sub-sample sizes. Note that even relatively small sub-samples already deliver estimates very close to the OLS estimates.</p>

</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>The computational complexity of this is larger than <span class="math inline">\(O(n^{2})\)</span>. That is, for an input of size <span class="math inline">\(n\)</span>, the time needed to compute (or the number of operations needed) is <span class="math inline">\(n^2\)</span>.<a href="computing-resources.html#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>In reality we would not know this, of course. Acting as if we knew the real model is exactly the point of Monte Carlo studies. It allows us to analyze the properties of estimators by simulation.<a href="computing-resources.html#fnref2" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="resource-allocation.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 1
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bigdata.pdf", "bigdata.html", "bigdata.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
