<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Distributed Systems | Big Data Analytics</title>
  <meta name="description" content="A guide to practical big data analytics in R." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Distributed Systems | Big Data Analytics" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://umatter.github.io/BigData" />
  <meta property="og:image" content="https://umatter.github.io/BigDataimg/cover.png" />
  <meta property="og:description" content="A guide to practical big data analytics in R." />
  <meta name="github-repo" content="umatter/BigData" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Distributed Systems | Big Data Analytics" />
  
  <meta name="twitter:description" content="A guide to practical big data analytics in R." />
  <meta name="twitter:image" content="https://umatter.github.io/BigDataimg/cover.png" />

<meta name="author" content="Ulrich Matter" />


<meta name="date" content="2022-02-16" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="hardware-computing-resources.html"/>
<link rel="next" href="cloud-computing.html"/>
<script src="libs/header-attrs/header-attrs.js"></script>
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets/htmlwidgets.js"></script>
<script src="libs/d3/d3.min.js"></script>
<link href="libs/profvis/profvis.css" rel="stylesheet" />
<script src="libs/profvis/profvis.js"></script>
<script src="libs/profvis/scroll.js"></script>
<link href="libs/highlight/textmate.css" rel="stylesheet" />
<script src="libs/highlight/highlight.js"></script>
<script src="libs/profvis-binding/profvis.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Big Data Analytics</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#what-is-big-in-big-data"><i class="fa fa-check"></i><b>1.1</b> What is <em>big</em> in “Big Data?”</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#approaches-to-analyzing-big-data"><i class="fa fa-check"></i><b>1.2</b> Approaches to analyzing Big Data</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#content-overview"><i class="fa fa-check"></i><b>1.3</b> Content overview</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#prerequisits"><i class="fa fa-check"></i><b>1.4</b> Prerequisits</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="software-programming-with-big-data.html"><a href="software-programming-with-big-data.html"><i class="fa fa-check"></i><b>2</b> Software: Programming with (Big) Data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="software-programming-with-big-data.html"><a href="software-programming-with-big-data.html#building-blocks-for-programming-with-big-data"><i class="fa fa-check"></i><b>2.1</b> Building blocks for programming with big data</a></li>
<li class="chapter" data-level="2.2" data-path="software-programming-with-big-data.html"><a href="software-programming-with-big-data.html#measuring-r-performance"><i class="fa fa-check"></i><b>2.2</b> Measuring R performance</a></li>
<li class="chapter" data-level="2.3" data-path="software-programming-with-big-data.html"><a href="software-programming-with-big-data.html#writing-efficient-code"><i class="fa fa-check"></i><b>2.3</b> Writing efficient code</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="software-programming-with-big-data.html"><a href="software-programming-with-big-data.html#memory-allocation-and-growing-objects"><i class="fa fa-check"></i><b>2.3.1</b> Memory allocation and growing objects</a></li>
<li class="chapter" data-level="2.3.2" data-path="software-programming-with-big-data.html"><a href="software-programming-with-big-data.html#vectorization-in-basic-r-functions"><i class="fa fa-check"></i><b>2.3.2</b> Vectorization in basic R functions</a></li>
<li class="chapter" data-level="2.3.3" data-path="software-programming-with-big-data.html"><a href="software-programming-with-big-data.html#apply-type-functions-and-vectorization"><i class="fa fa-check"></i><b>2.3.3</b> <code>apply</code>-type functions and vectorization</a></li>
<li class="chapter" data-level="2.3.4" data-path="software-programming-with-big-data.html"><a href="software-programming-with-big-data.html#avoid-unnecessary-copying"><i class="fa fa-check"></i><b>2.3.4</b> Avoid unnecessary copying</a></li>
<li class="chapter" data-level="2.3.5" data-path="software-programming-with-big-data.html"><a href="software-programming-with-big-data.html#releasing-memory"><i class="fa fa-check"></i><b>2.3.5</b> Releasing memory</a></li>
<li class="chapter" data-level="2.3.6" data-path="software-programming-with-big-data.html"><a href="software-programming-with-big-data.html#beyond-r"><i class="fa fa-check"></i><b>2.3.6</b> Beyond R</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="software-programming-with-big-data.html"><a href="software-programming-with-big-data.html#sql-basics"><i class="fa fa-check"></i><b>2.4</b> SQL basics</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="software-programming-with-big-data.html"><a href="software-programming-with-big-data.html#first-steps-in-sqlite"><i class="fa fa-check"></i><b>2.4.1</b> First steps in SQL(ite)</a></li>
<li class="chapter" data-level="2.4.2" data-path="software-programming-with-big-data.html"><a href="software-programming-with-big-data.html#joins"><i class="fa fa-check"></i><b>2.4.2</b> Joins</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="hardware-computing-resources.html"><a href="hardware-computing-resources.html"><i class="fa fa-check"></i><b>3</b> Hardware: Computing Resources</a>
<ul>
<li class="chapter" data-level="3.1" data-path="hardware-computing-resources.html"><a href="hardware-computing-resources.html#components-of-a-standard-computing-environment"><i class="fa fa-check"></i><b>3.1</b> Components of a standard computing environment</a></li>
<li class="chapter" data-level="3.2" data-path="hardware-computing-resources.html"><a href="hardware-computing-resources.html#mass-storage-and-memory"><i class="fa fa-check"></i><b>3.2</b> Mass Storage and Memory</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="hardware-computing-resources.html"><a href="hardware-computing-resources.html#units-of-informationdata-storage"><i class="fa fa-check"></i><b>3.2.1</b> Units of information/data storage</a></li>
<li class="chapter" data-level="3.2.2" data-path="hardware-computing-resources.html"><a href="hardware-computing-resources.html#combining-ram-and-hard-disk-virtual-memory"><i class="fa fa-check"></i><b>3.2.2</b> Combining RAM and hard-disk: virtual memory</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="hardware-computing-resources.html"><a href="hardware-computing-resources.html#computation-cpu"><i class="fa fa-check"></i><b>3.3</b> Computation: CPU</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="hardware-computing-resources.html"><a href="hardware-computing-resources.html#parallelization"><i class="fa fa-check"></i><b>3.3.1</b> Parallelization</a></li>
<li class="chapter" data-level="3.3.2" data-path="hardware-computing-resources.html"><a href="hardware-computing-resources.html#gpus-for-scientific-computing"><i class="fa fa-check"></i><b>3.3.2</b> GPUs for Scientific Computing</a></li>
<li class="chapter" data-level="3.3.3" data-path="hardware-computing-resources.html"><a href="hardware-computing-resources.html#gpus-in-r"><i class="fa fa-check"></i><b>3.3.3</b> GPUs in R</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="hardware-computing-resources.html"><a href="hardware-computing-resources.html#resource-allocation"><i class="fa fa-check"></i><b>3.4</b> Resource allocation</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="distributed-systems.html"><a href="distributed-systems.html"><i class="fa fa-check"></i><b>4</b> Distributed Systems</a>
<ul>
<li class="chapter" data-level="4.1" data-path="distributed-systems.html"><a href="distributed-systems.html#mapreduce"><i class="fa fa-check"></i><b>4.1</b> MapReduce</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="distributed-systems.html"><a href="distributed-systems.html#mapreduce-concept-illustrated-in-r"><i class="fa fa-check"></i><b>4.1.1</b> Map/Reduce Concept Illustrated in R</a></li>
<li class="chapter" data-level="4.1.2" data-path="distributed-systems.html"><a href="distributed-systems.html#mapper"><i class="fa fa-check"></i><b>4.1.2</b> Mapper</a></li>
<li class="chapter" data-level="4.1.3" data-path="distributed-systems.html"><a href="distributed-systems.html#reducer"><i class="fa fa-check"></i><b>4.1.3</b> Reducer</a></li>
<li class="chapter" data-level="4.1.4" data-path="distributed-systems.html"><a href="distributed-systems.html#simpler-example-compute-the-total-number-of-words"><i class="fa fa-check"></i><b>4.1.4</b> Simpler example: Compute the total number of words</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="distributed-systems.html"><a href="distributed-systems.html#hadoop"><i class="fa fa-check"></i><b>4.2</b> Hadoop</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="distributed-systems.html"><a href="distributed-systems.html#hadoop-word-count"><i class="fa fa-check"></i><b>4.2.1</b> Hadoop Word Count</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="cloud-computing.html"><a href="cloud-computing.html"><i class="fa fa-check"></i><b>5</b> Cloud Computing</a>
<ul>
<li class="chapter" data-level="5.1" data-path="cloud-computing.html"><a href="cloud-computing.html#scaling-up-parallel-computing"><i class="fa fa-check"></i><b>5.1</b> Scaling up: parallel computing</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="cloud-computing.html"><a href="cloud-computing.html#setting-up-aws-ec2-with-rrstudio"><i class="fa fa-check"></i><b>5.1.1</b> Setting up AWS EC2 with R/RStudio</a></li>
<li class="chapter" data-level="5.1.2" data-path="cloud-computing.html"><a href="cloud-computing.html#parallelization-with-an-ec2-instance"><i class="fa fa-check"></i><b>5.1.2</b> Parallelization with an EC2 instance</a></li>
<li class="chapter" data-level="5.1.3" data-path="cloud-computing.html"><a href="cloud-computing.html#aws-emr-mapreduce-in-the-cloud"><i class="fa fa-check"></i><b>5.1.3</b> AWS EMR: MapReduce in the cloud</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-storage-and-databases.html"><a href="data-storage-and-databases.html"><i class="fa fa-check"></i><b>6</b> Data Storage and Databases</a>
<ul>
<li class="chapter" data-level="6.1" data-path="data-storage-and-databases.html"><a href="data-storage-and-databases.html#big-data-storage"><i class="fa fa-check"></i><b>6.1</b> (Big) Data Storage</a></li>
<li class="chapter" data-level="6.2" data-path="data-storage-and-databases.html"><a href="data-storage-and-databases.html#rdbms-basics"><i class="fa fa-check"></i><b>6.2</b> RDBMS basics</a></li>
<li class="chapter" data-level="6.3" data-path="data-storage-and-databases.html"><a href="data-storage-and-databases.html#row-based-vs-column-based-databases"><i class="fa fa-check"></i><b>6.3</b> Row-based vs column-based databases</a></li>
<li class="chapter" data-level="6.4" data-path="data-storage-and-databases.html"><a href="data-storage-and-databases.html#getting-started-with-rsqlite"><i class="fa fa-check"></i><b>6.4</b> Getting started with RSQLite</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="data-storage-and-databases.html"><a href="data-storage-and-databases.html#warm-up-in-sqlite-indices-and-joins"><i class="fa fa-check"></i><b>6.4.1</b> Warm up in SQLite: indices and joins</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="data-storage-and-databases.html"><a href="data-storage-and-databases.html#sqlite-from-within-r"><i class="fa fa-check"></i><b>6.5</b> SQLite from within R</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="data-storage-and-databases.html"><a href="data-storage-and-databases.html#creating-a-new-database-with-rsqlite"><i class="fa fa-check"></i><b>6.5.1</b> Creating a new database with <code>RSQLite</code></a></li>
<li class="chapter" data-level="6.5.2" data-path="data-storage-and-databases.html"><a href="data-storage-and-databases.html#importing-data"><i class="fa fa-check"></i><b>6.5.2</b> Importing data</a></li>
<li class="chapter" data-level="6.5.3" data-path="data-storage-and-databases.html"><a href="data-storage-and-databases.html#issue-queries"><i class="fa fa-check"></i><b>6.5.3</b> Issue queries</a></li>
<li class="chapter" data-level="6.5.4" data-path="data-storage-and-databases.html"><a href="data-storage-and-databases.html#mass-storage-mariadb-on-an-ec2-instance"><i class="fa fa-check"></i><b>6.5.4</b> Mass Storage: MariaDB on an EC2 instance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="big-data-cleaning-and-transformation.html"><a href="big-data-cleaning-and-transformation.html"><i class="fa fa-check"></i><b>7</b> Big Data Cleaning and Transformation</a>
<ul>
<li class="chapter" data-level="7.1" data-path="big-data-cleaning-and-transformation.html"><a href="big-data-cleaning-and-transformation.html#out-of-memory-strategies"><i class="fa fa-check"></i><b>7.1</b> ‘Out-of-memory’ strategies</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="big-data-cleaning-and-transformation.html"><a href="big-data-cleaning-and-transformation.html#chunking-data-with-the-ff-package"><i class="fa fa-check"></i><b>7.1.1</b> Chunking data with the <code>ff</code>-package</a></li>
<li class="chapter" data-level="7.1.2" data-path="big-data-cleaning-and-transformation.html"><a href="big-data-cleaning-and-transformation.html#memory-mapping-with-bigmemory"><i class="fa fa-check"></i><b>7.1.2</b> Memory mapping with <code>bigmemory</code></a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="big-data-cleaning-and-transformation.html"><a href="big-data-cleaning-and-transformation.html#typical-cleaning-tasks"><i class="fa fa-check"></i><b>7.2</b> Typical cleaning tasks</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="big-data-cleaning-and-transformation.html"><a href="big-data-cleaning-and-transformation.html#data-preparation-with-ff"><i class="fa fa-check"></i><b>7.2.1</b> Data Preparation with <code>ff</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="descriptive-statistics-and-aggregation.html"><a href="descriptive-statistics-and-aggregation.html"><i class="fa fa-check"></i><b>8</b> Descriptive Statistics and Aggregation</a>
<ul>
<li class="chapter" data-level="8.1" data-path="descriptive-statistics-and-aggregation.html"><a href="descriptive-statistics-and-aggregation.html#data-aggregation-the-split-apply-combine-strategy"><i class="fa fa-check"></i><b>8.1</b> Data aggregation: The ‘split-apply-combine’ strategy</a></li>
<li class="chapter" data-level="8.2" data-path="descriptive-statistics-and-aggregation.html"><a href="descriptive-statistics-and-aggregation.html#data-aggregation-tutorial"><i class="fa fa-check"></i><b>8.2</b> Data aggregation tutorial</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="descriptive-statistics-and-aggregation.html"><a href="descriptive-statistics-and-aggregation.html#gathering-and-compilation-of-all-the-raw-data"><i class="fa fa-check"></i><b>8.2.1</b> Gathering and Compilation of all the raw data</a></li>
<li class="chapter" data-level="8.2.2" data-path="descriptive-statistics-and-aggregation.html"><a href="descriptive-statistics-and-aggregation.html#data-aggregation-with-chunked-data-files"><i class="fa fa-check"></i><b>8.2.2</b> Data aggregation with chunked data files</a></li>
<li class="chapter" data-level="8.2.3" data-path="descriptive-statistics-and-aggregation.html"><a href="descriptive-statistics-and-aggregation.html#high-speed-in-memory-data-aggregation-with-data.table"><i class="fa fa-check"></i><b>8.2.3</b> High-speed in-memory data aggregation with <code>data.table</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="big-data-visualization.html"><a href="big-data-visualization.html"><i class="fa fa-check"></i><b>9</b> (Big) Data Visualization</a>
<ul>
<li class="chapter" data-level="9.1" data-path="big-data-visualization.html"><a href="big-data-visualization.html#data-set"><i class="fa fa-check"></i><b>9.1</b> Data Set</a></li>
<li class="chapter" data-level="9.2" data-path="big-data-visualization.html"><a href="big-data-visualization.html#excursus-modify-and-create-themes"><i class="fa fa-check"></i><b>9.2</b> Excursus: modify and create themes</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="big-data-visualization.html"><a href="big-data-visualization.html#create-your-own-theme-simple-approach"><i class="fa fa-check"></i><b>9.2.1</b> Create your own theme: simple approach</a></li>
<li class="chapter" data-level="9.2.2" data-path="big-data-visualization.html"><a href="big-data-visualization.html#implementing-actual-themes-as-functions."><i class="fa fa-check"></i><b>9.2.2</b> Implementing actual themes as functions.</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="big-data-visualization.html"><a href="big-data-visualization.html#visualize-time-and-space"><i class="fa fa-check"></i><b>9.3</b> Visualize Time and Space</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="big-data-visualization.html"><a href="big-data-visualization.html#preparations"><i class="fa fa-check"></i><b>9.3.1</b> Preparations</a></li>
<li class="chapter" data-level="9.3.2" data-path="big-data-visualization.html"><a href="big-data-visualization.html#pick-up-and-drop-off-locations"><i class="fa fa-check"></i><b>9.3.2</b> Pick-up and drop-off locations</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="big-data-visualization.html"><a href="big-data-visualization.html#excursus-change-color-schemes"><i class="fa fa-check"></i><b>9.4</b> Excursus: change color schemes</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="bottle-necks-in-local-big-data-analytics.html"><a href="bottle-necks-in-local-big-data-analytics.html"><i class="fa fa-check"></i><b>10</b> Bottle Necks in Local Big Data Analytics</a>
<ul>
<li class="chapter" data-level="10.1" data-path="bottle-necks-in-local-big-data-analytics.html"><a href="bottle-necks-in-local-big-data-analytics.html#example-of-computation-time-and-memory-allocation"><i class="fa fa-check"></i><b>10.1</b> Example of Computation Time and Memory Allocation</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="bottle-necks-in-local-big-data-analytics.html"><a href="bottle-necks-in-local-big-data-analytics.html#preparation"><i class="fa fa-check"></i><b>10.1.1</b> Preparation</a></li>
<li class="chapter" data-level="10.1.2" data-path="bottle-necks-in-local-big-data-analytics.html"><a href="bottle-necks-in-local-big-data-analytics.html#naïve-approach-ignorant-of-r"><i class="fa fa-check"></i><b>10.1.2</b> Naïve Approach (ignorant of R)</a></li>
<li class="chapter" data-level="10.1.3" data-path="bottle-necks-in-local-big-data-analytics.html"><a href="bottle-necks-in-local-big-data-analytics.html#improvement-1-pre-allocation-of-memory"><i class="fa fa-check"></i><b>10.1.3</b> Improvement 1: Pre-allocation of memory</a></li>
<li class="chapter" data-level="10.1.4" data-path="bottle-necks-in-local-big-data-analytics.html"><a href="bottle-necks-in-local-big-data-analytics.html#improvement-2-exploit-vectorization"><i class="fa fa-check"></i><b>10.1.4</b> Improvement 2: Exploit vectorization</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="bottle-necks-in-local-big-data-analytics.html"><a href="bottle-necks-in-local-big-data-analytics.html#case-study-parallel-processing"><i class="fa fa-check"></i><b>10.2</b> Case study: Parallel processing</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="bottle-necks-in-local-big-data-analytics.html"><a href="bottle-necks-in-local-big-data-analytics.html#parallelization-with-an-ec2-instance-1"><i class="fa fa-check"></i><b>10.2.1</b> Parallelization with an EC2 instance</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="bottle-necks-in-local-big-data-analytics.html"><a href="bottle-necks-in-local-big-data-analytics.html#case-study-memory-allocation"><i class="fa fa-check"></i><b>10.3</b> Case study: Memory allocation</a></li>
<li class="chapter" data-level="10.4" data-path="bottle-necks-in-local-big-data-analytics.html"><a href="bottle-necks-in-local-big-data-analytics.html#big-data-econometrics"><i class="fa fa-check"></i><b>10.4</b> Big Data econometrics</a></li>
<li class="chapter" data-level="10.5" data-path="bottle-necks-in-local-big-data-analytics.html"><a href="bottle-necks-in-local-big-data-analytics.html#example-fast-least-squares-regression"><i class="fa fa-check"></i><b>10.5</b> Example: Fast least squares regression</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="bottle-necks-in-local-big-data-analytics.html"><a href="bottle-necks-in-local-big-data-analytics.html#ols-as-a-point-of-reference"><i class="fa fa-check"></i><b>10.5.1</b> OLS as a point of reference</a></li>
<li class="chapter" data-level="10.5.2" data-path="bottle-necks-in-local-big-data-analytics.html"><a href="bottle-necks-in-local-big-data-analytics.html#the-uluru-algorithm-as-an-alternative-to-ols"><i class="fa fa-check"></i><b>10.5.2</b> The Uluru algorithm as an alternative to OLS</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="bottle-necks-in-local-big-data-analytics.html"><a href="bottle-necks-in-local-big-data-analytics.html#gpus-and-machine-learning"><i class="fa fa-check"></i><b>10.6</b> GPUs and Machine Learning</a>
<ul>
<li class="chapter" data-level="10.6.1" data-path="bottle-necks-in-local-big-data-analytics.html"><a href="bottle-necks-in-local-big-data-analytics.html#tensorflowkeras-example-predict-housing-prices"><i class="fa fa-check"></i><b>10.6.1</b> Tensorflow/Keras example: predict housing prices</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="bottle-necks-in-local-big-data-analytics.html"><a href="bottle-necks-in-local-big-data-analytics.html#a-word-of-caution"><i class="fa fa-check"></i><b>10.7</b> A word of caution</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="applied-econometrics-with-apache-spark.html"><a href="applied-econometrics-with-apache-spark.html"><i class="fa fa-check"></i><b>11</b> Applied Econometrics with Apache Spark</a>
<ul>
<li class="chapter" data-level="11.1" data-path="applied-econometrics-with-apache-spark.html"><a href="applied-econometrics-with-apache-spark.html#spark-basics"><i class="fa fa-check"></i><b>11.1</b> Spark basics</a></li>
<li class="chapter" data-level="11.2" data-path="applied-econometrics-with-apache-spark.html"><a href="applied-econometrics-with-apache-spark.html#spark-in-r"><i class="fa fa-check"></i><b>11.2</b> Spark in R</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="applied-econometrics-with-apache-spark.html"><a href="applied-econometrics-with-apache-spark.html#data-import-and-summary-statistics"><i class="fa fa-check"></i><b>11.2.1</b> Data import and summary statistics</a></li>
<li class="chapter" data-level="11.2.2" data-path="applied-econometrics-with-apache-spark.html"><a href="applied-econometrics-with-apache-spark.html#regression-analysis-with-sparklyr"><i class="fa fa-check"></i><b>11.2.2</b> Regression analysis with <code>sparklyr</code></a></li>
</ul></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="appendix-a.html"><a href="appendix-a.html"><i class="fa fa-check"></i><b>A</b> Appendix A</a>
<ul>
<li class="chapter" data-level="A.1" data-path="appendix-a.html"><a href="appendix-a.html#github"><i class="fa fa-check"></i><b>A.1</b> GitHub</a>
<ul>
<li class="chapter" data-level="A.1.1" data-path="appendix-a.html"><a href="appendix-a.html#initiate-a-new-repository"><i class="fa fa-check"></i><b>A.1.1</b> Initiate a new repository</a></li>
<li class="chapter" data-level="A.1.2" data-path="appendix-a.html"><a href="appendix-a.html#clone-this-courses-repository"><i class="fa fa-check"></i><b>A.1.2</b> Clone this course’s repository</a></li>
<li class="chapter" data-level="A.1.3" data-path="appendix-a.html"><a href="appendix-a.html#fork-this-courses-repository"><i class="fa fa-check"></i><b>A.1.3</b> Fork this course’s repository</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="B" data-path="appendix-b.html"><a href="appendix-b.html"><i class="fa fa-check"></i><b>B</b> Appendix B</a>
<ul>
<li class="chapter" data-level="B.0.1" data-path="appendix-b.html"><a href="appendix-b.html#data-types-and-memorystorage"><i class="fa fa-check"></i><b>B.0.1</b> Data types and memory/storage</a></li>
<li class="chapter" data-level="B.0.2" data-path="appendix-b.html"><a href="appendix-b.html#data-structures"><i class="fa fa-check"></i><b>B.0.2</b> Data structures</a></li>
<li class="chapter" data-level="B.0.3" data-path="appendix-b.html"><a href="appendix-b.html#vectors-vs-factors-in-r"><i class="fa fa-check"></i><b>B.0.3</b> Vectors vs Factors in R</a></li>
<li class="chapter" data-level="B.0.4" data-path="appendix-b.html"><a href="appendix-b.html#r-tools-to-investigate-structures-and-types"><i class="fa fa-check"></i><b>B.0.4</b> R-tools to investigate structures and types</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://umatter.github.io" target="blank">umatter.github.io</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Big Data Analytics</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="distributed-systems" class="section level1" number="4">
<h1><span class="header-section-number">Chapter 4</span> Distributed Systems</h1>
<p>When working with very large datasets (i.e., Terabytes of data), simply scaling up might not be a reasonable solution. In practice, there is a limited amount of RAM and a limited number of CPU cores that can work on one machine. In simple terms, the solution then is to connect several computers (each with their own RAM, CPU, mass storage) in a network, distribute the dataset across all computers (“nodes”) in this network, and work on the data simultaneously across all nodes. Such a computing system is commonly referred to as a “distributed system.” From a technical standpoint the key difference between a distributed system and the more familiar parallel system (e.g. our desktop computer with its multicore CPU) is that in distributed systems the different components do not share the same memory (and storage). Figure <a href="distributed-systems.html#fig:distributedsystems">4.1</a> illustrates this point.</p>
<div class="figure" style="text-align: center"><span id="fig:distributedsystems"></span>
<img src="img/distributed_systems.png" alt="(a), (b): a distributed system. (c): a parallel system.I llustration by Miym (CC BY-SA 3.0)." width="30%" />
<p class="caption">
Figure 4.1: (a), (b): a distributed system. (c): a parallel system.I llustration by Miym (CC BY-SA 3.0).
</p>
</div>

<p>In a distributed system, the dataset is literally split up into pieces that then reside separately on different nodes. This requires an additional “layer” of software (that coordinates the distribution/loading of data as well as the simultaneous processing) and a different approach (a different “programming model”) to defining computing/data analytics tasks. Below, we will look at both of these aspects in turn.</p>
<div id="mapreduce" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> MapReduce</h2>
<p>The most broadly used programming model and its implementation for processing big data on distributed systems is called MapReduce. It essentially consists of two procedures and is conceptually very close to the “split-apply-combine” strategy in data analysis. First, the Map function sorts/filters the data (on each node) and a Reduce function that aggregates the sorted/filtered data. In the background, the MapReduce “framework” orchestrates these processes across all nodes, collects the results, and returns them to the user.</p>
<p>Let us illustrate the basic idea behind MapReduce with a simple example. Suppose you are working on a text mining task in which all the raw text in thousands of digitized books (stored as text files) need to be processed. In a first step, you want to compute word frequencies, that is a count of the number of occurrences of specific words in all books combined.</p>
<p>For simplicity, let us only focus on the following excerpts from two books:</p>
<center>
<p>Text in book 1:</p>
<p><em>Apple Orange Mango</em>
 </p>
<p><em>Orange Grapes Plum</em>
 </p>
</center>
<center>
<p>Text in book 2:</p>
<p><em>Apple Plum Mango</em>
 </p>
<p><em>Apple Apple Plum</em>
 </p>
</center>
<div class="figure" style="text-align: center"><span id="fig:mapreduce"></span>
<img src="img/mapreduce_wordcount.jpg" alt="Illustration of the MapReduce programming model." width="30%" />
<p class="caption">
Figure 4.2: Illustration of the MapReduce programming model.
</p>
</div>

<div id="mapreduce-concept-illustrated-in-r" class="section level3" number="4.1.1">
<h3><span class="header-section-number">4.1.1</span> Map/Reduce Concept Illustrated in R</h3>
<p>In order to better understand the basic concept behind the MapReduce-Framework on a distributed system, let’s look at how we can combine the basic functions <code>map()</code> and <code>reduce()</code> in R to implement the basic MapReduce example shown in <span class="citation"><a href="references.html#ref-walkowiak_2016" role="doc-biblioref">Walkowiak</a> (<a href="references.html#ref-walkowiak_2016" role="doc-biblioref">2016</a>)</span>, Chapter 4, pages 132-134 (this is just to illustrate the underlying idea, <em>not</em> to suggest that MapReduce actually is simply an application of the classical <code>map</code> and <code>reduce (fold)</code> functions in functional programming).<a href="#fn15" class="footnote-ref" id="fnref15"><sup>15</sup></a> The overall aim of the program is to count the number of times each word is repeated in a given text. The input to the program is thus a text, the output is a list of key-value pairs with the unique words occurring in the text as keys and their respective number of occurrences as values.</p>
<p>In the code example, we will use the following text as input.</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="distributed-systems.html#cb125-1" aria-hidden="true" tabindex="-1"></a>input_text <span class="ot">&lt;-</span></span>
<span id="cb125-2"><a href="distributed-systems.html#cb125-2" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Simon is a friend of Becky.</span></span>
<span id="cb125-3"><a href="distributed-systems.html#cb125-3" aria-hidden="true" tabindex="-1"></a><span class="st">Becky is a friend of Ann.</span></span>
<span id="cb125-4"><a href="distributed-systems.html#cb125-4" aria-hidden="true" tabindex="-1"></a><span class="st">Ann is not a friend of Simon.&quot;</span></span></code></pre></div>
</div>
<div id="mapper" class="section level3" number="4.1.2">
<h3><span class="header-section-number">4.1.2</span> Mapper</h3>
<p>The Mapper first splits the text into lines, and then splits the lines into key-value pairs, assigning to each key the value <code>1</code>. For the first step we use <code>strsplit()</code> that takes a character string as input and splits it into a list of substrings according to the matches of a substring (here <code>"\n"</code>, indicating the end of a line).</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="distributed-systems.html#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mapper splits input into lines</span></span>
<span id="cb126-2"><a href="distributed-systems.html#cb126-2" aria-hidden="true" tabindex="-1"></a>lines <span class="ot">&lt;-</span> <span class="fu">as.list</span>(<span class="fu">strsplit</span>(input_text, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)[[<span class="dv">1</span>]])</span>
<span id="cb126-3"><a href="distributed-systems.html#cb126-3" aria-hidden="true" tabindex="-1"></a>lines</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;Simon is a friend of Becky.&quot;
## 
## [[2]]
## [1] &quot;Becky is a friend of Ann.&quot;
## 
## [[3]]
## [1] &quot;Ann is not a friend of Simon.&quot;</code></pre>
<p>In a second step, we apply our own function (<code>map_fun()</code>) to each line of text via <code>Map()</code>. <code>map_fun()</code> splits each line into words (keys) and assigns a value of <code>1</code> to each key.</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="distributed-systems.html#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mapper splits lines into Key-Value pairs</span></span>
<span id="cb128-2"><a href="distributed-systems.html#cb128-2" aria-hidden="true" tabindex="-1"></a>map_fun <span class="ot">&lt;-</span></span>
<span id="cb128-3"><a href="distributed-systems.html#cb128-3" aria-hidden="true" tabindex="-1"></a>     <span class="cf">function</span>(x){</span>
<span id="cb128-4"><a href="distributed-systems.html#cb128-4" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb128-5"><a href="distributed-systems.html#cb128-5" aria-hidden="true" tabindex="-1"></a>          <span class="co"># remove special characters</span></span>
<span id="cb128-6"><a href="distributed-systems.html#cb128-6" aria-hidden="true" tabindex="-1"></a>          x_clean <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;[[:punct:]]&quot;</span>, <span class="st">&quot;&quot;</span>, x)</span>
<span id="cb128-7"><a href="distributed-systems.html#cb128-7" aria-hidden="true" tabindex="-1"></a>          <span class="co"># split line into words</span></span>
<span id="cb128-8"><a href="distributed-systems.html#cb128-8" aria-hidden="true" tabindex="-1"></a>          keys <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">strsplit</span>(x_clean, <span class="st">&quot; &quot;</span>))</span>
<span id="cb128-9"><a href="distributed-systems.html#cb128-9" aria-hidden="true" tabindex="-1"></a>          <span class="co"># initiate key-value pairs</span></span>
<span id="cb128-10"><a href="distributed-systems.html#cb128-10" aria-hidden="true" tabindex="-1"></a>          key_values <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span>, <span class="fu">length</span>(keys))</span>
<span id="cb128-11"><a href="distributed-systems.html#cb128-11" aria-hidden="true" tabindex="-1"></a>          <span class="fu">names</span>(key_values) <span class="ot">&lt;-</span> keys</span>
<span id="cb128-12"><a href="distributed-systems.html#cb128-12" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb128-13"><a href="distributed-systems.html#cb128-13" aria-hidden="true" tabindex="-1"></a>          <span class="fu">return</span>(key_values)</span>
<span id="cb128-14"><a href="distributed-systems.html#cb128-14" aria-hidden="true" tabindex="-1"></a>     }</span>
<span id="cb128-15"><a href="distributed-systems.html#cb128-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-16"><a href="distributed-systems.html#cb128-16" aria-hidden="true" tabindex="-1"></a>kv_pairs <span class="ot">&lt;-</span> <span class="fu">Map</span>(map_fun, lines)</span>
<span id="cb128-17"><a href="distributed-systems.html#cb128-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-18"><a href="distributed-systems.html#cb128-18" aria-hidden="true" tabindex="-1"></a><span class="co"># look at the result</span></span>
<span id="cb128-19"><a href="distributed-systems.html#cb128-19" aria-hidden="true" tabindex="-1"></a>kv_pairs</span></code></pre></div>
<pre><code>## [[1]]
##  Simon     is      a friend     of  Becky 
##      1      1      1      1      1      1 
## 
## [[2]]
##  Becky     is      a friend     of    Ann 
##      1      1      1      1      1      1 
## 
## [[3]]
##    Ann     is    not      a friend     of  Simon 
##      1      1      1      1      1      1      1</code></pre>
</div>
<div id="reducer" class="section level3" number="4.1.3">
<h3><span class="header-section-number">4.1.3</span> Reducer</h3>
<p>The Reducer first sorts and shuffles the input from the Mapper and then reduces the key-value pairs by summing up the values for each key.</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="distributed-systems.html#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="co"># order and shuffle</span></span>
<span id="cb130-2"><a href="distributed-systems.html#cb130-2" aria-hidden="true" tabindex="-1"></a>kv_pairs <span class="ot">&lt;-</span> <span class="fu">unlist</span>(kv_pairs)</span>
<span id="cb130-3"><a href="distributed-systems.html#cb130-3" aria-hidden="true" tabindex="-1"></a>keys <span class="ot">&lt;-</span> <span class="fu">unique</span>(<span class="fu">names</span>(kv_pairs))</span>
<span id="cb130-4"><a href="distributed-systems.html#cb130-4" aria-hidden="true" tabindex="-1"></a>keys <span class="ot">&lt;-</span> keys[<span class="fu">order</span>(keys)]</span>
<span id="cb130-5"><a href="distributed-systems.html#cb130-5" aria-hidden="true" tabindex="-1"></a>shuffled <span class="ot">&lt;-</span> <span class="fu">lapply</span>(keys,</span>
<span id="cb130-6"><a href="distributed-systems.html#cb130-6" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">function</span>(x) kv_pairs[x <span class="sc">==</span> <span class="fu">names</span>(kv_pairs)])</span>
<span id="cb130-7"><a href="distributed-systems.html#cb130-7" aria-hidden="true" tabindex="-1"></a>shuffled</span></code></pre></div>
<pre><code>## [[1]]
## a a a 
## 1 1 1 
## 
## [[2]]
## Ann Ann 
##   1   1 
## 
## [[3]]
## Becky Becky 
##     1     1 
## 
## [[4]]
## friend friend friend 
##      1      1      1 
## 
## [[5]]
## is is is 
##  1  1  1 
## 
## [[6]]
## not 
##   1 
## 
## [[7]]
## of of of 
##  1  1  1 
## 
## [[8]]
## Simon Simon 
##     1     1</code></pre>
<p>Now we can sum up the keys in order to get the word count for the entire input.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="distributed-systems.html#cb132-1" aria-hidden="true" tabindex="-1"></a>sums <span class="ot">&lt;-</span> <span class="fu">sapply</span>(shuffled, sum)</span>
<span id="cb132-2"><a href="distributed-systems.html#cb132-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(sums) <span class="ot">&lt;-</span> keys</span>
<span id="cb132-3"><a href="distributed-systems.html#cb132-3" aria-hidden="true" tabindex="-1"></a>sums</span></code></pre></div>
<pre><code>##      a    Ann  Becky friend     is    not     of 
##      3      2      2      3      3      1      3 
##  Simon 
##      2</code></pre>
</div>
<div id="simpler-example-compute-the-total-number-of-words" class="section level3" number="4.1.4">
<h3><span class="header-section-number">4.1.4</span> Simpler example: Compute the total number of words</h3>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="distributed-systems.html#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="co"># assigns the number of words per line as value</span></span>
<span id="cb134-2"><a href="distributed-systems.html#cb134-2" aria-hidden="true" tabindex="-1"></a>map_fun2 <span class="ot">&lt;-</span> </span>
<span id="cb134-3"><a href="distributed-systems.html#cb134-3" aria-hidden="true" tabindex="-1"></a>     <span class="cf">function</span>(x){</span>
<span id="cb134-4"><a href="distributed-systems.html#cb134-4" aria-hidden="true" tabindex="-1"></a>          <span class="co"># remove special characters</span></span>
<span id="cb134-5"><a href="distributed-systems.html#cb134-5" aria-hidden="true" tabindex="-1"></a>          x_clean <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;[[:punct:]]&quot;</span>, <span class="st">&quot;&quot;</span>, x)</span>
<span id="cb134-6"><a href="distributed-systems.html#cb134-6" aria-hidden="true" tabindex="-1"></a>          <span class="co"># split line into words, count no. of words per line</span></span>
<span id="cb134-7"><a href="distributed-systems.html#cb134-7" aria-hidden="true" tabindex="-1"></a>          values <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unlist</span>(<span class="fu">strsplit</span>(x_clean, <span class="st">&quot; &quot;</span>)))</span>
<span id="cb134-8"><a href="distributed-systems.html#cb134-8" aria-hidden="true" tabindex="-1"></a>          <span class="fu">return</span>(values)</span>
<span id="cb134-9"><a href="distributed-systems.html#cb134-9" aria-hidden="true" tabindex="-1"></a>     }</span>
<span id="cb134-10"><a href="distributed-systems.html#cb134-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Mapper</span></span>
<span id="cb134-11"><a href="distributed-systems.html#cb134-11" aria-hidden="true" tabindex="-1"></a>mapped <span class="ot">&lt;-</span> <span class="fu">Map</span>(map_fun2, lines)</span>
<span id="cb134-12"><a href="distributed-systems.html#cb134-12" aria-hidden="true" tabindex="-1"></a>mapped</span></code></pre></div>
<pre><code>## [[1]]
## [1] 6
## 
## [[2]]
## [1] 6
## 
## [[3]]
## [1] 7</code></pre>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="distributed-systems.html#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reducer</span></span>
<span id="cb136-2"><a href="distributed-systems.html#cb136-2" aria-hidden="true" tabindex="-1"></a>reduced <span class="ot">&lt;-</span> <span class="fu">Reduce</span>(sum, mapped)</span>
<span id="cb136-3"><a href="distributed-systems.html#cb136-3" aria-hidden="true" tabindex="-1"></a>reduced</span></code></pre></div>
<pre><code>## [1] 19</code></pre>
</div>
</div>
<div id="hadoop" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Hadoop</h2>
<p><img src="img/hadoop.png" width="90%" style="display: block; margin: auto;" /></p>
<div id="hadoop-word-count" class="section level3" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Hadoop Word Count</h3>
<p>Example adapted from <a href="https://www.digitalocean.com/community/tutorials/how-to-install-hadoop-in-stand-alone-mode-on-ubuntu-18-04#step-2-%E2%80%94-installing-hadoop">this tutorial</a> by Melissa Anderson and Hanif Jetha.</p>
<div id="install-hadoop-on-ubuntupop_os-linux" class="section level4" number="4.2.1.1">
<h4><span class="header-section-number">4.2.1.1</span> Install Hadoop (on Ubuntu/Pop!_OS Linux)</h4>
<div class="sourceCode" id="cb138"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb138-1"><a href="distributed-systems.html#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="co"># download binary</span></span>
<span id="cb138-2"><a href="distributed-systems.html#cb138-2" aria-hidden="true" tabindex="-1"></a><span class="fu">wget</span> https://downloads.apache.org/hadoop/common/hadoop-2.10.0/hadoop-2.10.0.tar.gz</span>
<span id="cb138-3"><a href="distributed-systems.html#cb138-3" aria-hidden="true" tabindex="-1"></a><span class="co"># download checksum</span></span>
<span id="cb138-4"><a href="distributed-systems.html#cb138-4" aria-hidden="true" tabindex="-1"></a><span class="fu">wget</span> https://www.apache.org/dist/hadoop/common/hadoop-2.10.0/hadoop-2.10.0.tar.gz.sha512</span>
<span id="cb138-5"><a href="distributed-systems.html#cb138-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-6"><a href="distributed-systems.html#cb138-6" aria-hidden="true" tabindex="-1"></a><span class="co"># run the verification</span></span>
<span id="cb138-7"><a href="distributed-systems.html#cb138-7" aria-hidden="true" tabindex="-1"></a><span class="ex">shasum</span> <span class="at">-a</span> 512 hadoop-2.10.0.tar.gz</span>
<span id="cb138-8"><a href="distributed-systems.html#cb138-8" aria-hidden="true" tabindex="-1"></a><span class="co"># compare with value in mds file</span></span>
<span id="cb138-9"><a href="distributed-systems.html#cb138-9" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> hadoop-2.10.0.tar.gz.sha512</span>
<span id="cb138-10"><a href="distributed-systems.html#cb138-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-11"><a href="distributed-systems.html#cb138-11" aria-hidden="true" tabindex="-1"></a><span class="co"># if all is fine, unpack</span></span>
<span id="cb138-12"><a href="distributed-systems.html#cb138-12" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-xzvf</span> hadoop-2.10.0.tar.gz</span>
<span id="cb138-13"><a href="distributed-systems.html#cb138-13" aria-hidden="true" tabindex="-1"></a><span class="co"># move to proper place</span></span>
<span id="cb138-14"><a href="distributed-systems.html#cb138-14" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> mv hadoop-2.10.0 /usr/local/hadoop</span>
<span id="cb138-15"><a href="distributed-systems.html#cb138-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-16"><a href="distributed-systems.html#cb138-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-17"><a href="distributed-systems.html#cb138-17" aria-hidden="true" tabindex="-1"></a><span class="co"># then point to this version from hadoop</span></span>
<span id="cb138-18"><a href="distributed-systems.html#cb138-18" aria-hidden="true" tabindex="-1"></a><span class="co"># open the file /usr/local/hadoop/etc/hadoop/hadoop-env.sh</span></span>
<span id="cb138-19"><a href="distributed-systems.html#cb138-19" aria-hidden="true" tabindex="-1"></a><span class="co"># in a text editor and add (where export JAVA_HOME=...)</span></span>
<span id="cb138-20"><a href="distributed-systems.html#cb138-20" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">JAVA_HOME=$(</span><span class="fu">readlink</span> <span class="at">-f</span> /usr/bin/java <span class="kw">|</span> <span class="fu">sed</span> <span class="st">&quot;s:bin/java::&quot;</span><span class="va">)</span></span>
<span id="cb138-21"><a href="distributed-systems.html#cb138-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-22"><a href="distributed-systems.html#cb138-22" aria-hidden="true" tabindex="-1"></a><span class="co"># clean up</span></span>
<span id="cb138-23"><a href="distributed-systems.html#cb138-23" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> hadoop-2.10.0.tar.gz</span>
<span id="cb138-24"><a href="distributed-systems.html#cb138-24" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> hadoop-2.10.0.tar.gz.sha512</span></code></pre></div>
</div>
<div id="run-hadoop" class="section level4" number="4.2.1.2">
<h4><span class="header-section-number">4.2.1.2</span> Run Hadoop</h4>
<div class="sourceCode" id="cb139"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb139-1"><a href="distributed-systems.html#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="co"># check installation</span></span>
<span id="cb139-2"><a href="distributed-systems.html#cb139-2" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/local/hadoop/bin/hadoop</span></span></code></pre></div>
</div>
<div id="run-example" class="section level4" number="4.2.1.3">
<h4><span class="header-section-number">4.2.1.3</span> Run example</h4>
<p>The basic Hadoop installation comes with a few examples for very typical map/reduce programs.<a href="#fn16" class="footnote-ref" id="fnref16"><sup>16</sup></a> Below we replicate the same word-count example as shown in simple R code above.</p>
<p>In a first step, we create an input directory where we store the input file(s) to feed to Hadoop.</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb140-1"><a href="distributed-systems.html#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create directory for input files (typically text files)</span></span>
<span id="cb140-2"><a href="distributed-systems.html#cb140-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> ~/input</span></code></pre></div>
<p>Then we add a textfile containing the same text as in the example as above (to make things simpler, we already remove special characters).</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb141-1"><a href="distributed-systems.html#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;Simon is a friend of Becky</span></span>
<span id="cb141-2"><a href="distributed-systems.html#cb141-2" aria-hidden="true" tabindex="-1"></a><span class="st">Becky is a friend of Ann</span></span>
<span id="cb141-3"><a href="distributed-systems.html#cb141-3" aria-hidden="true" tabindex="-1"></a><span class="st">Ann is not a friend of Simon&quot;</span> <span class="op">&gt;&gt;</span>  ~/input/text.txt</span></code></pre></div>
<p>Now we can run the MapReduce/Hadoop word count as follows, storing the results in a new directory called <code>wordcount_example</code>.</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb142-1"><a href="distributed-systems.html#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="co"># run mapreduce word count</span></span>
<span id="cb142-2"><a href="distributed-systems.html#cb142-2" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/local/hadoop/bin/hadoop</span> jar /usr/local/hadoop/share/hadoop/mapreduce/hadoop-mapreduce-examples-2.10.0.jar wordcount ~/input ~/wc_example</span></code></pre></div>
<p>Show the output:</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb143-1"><a href="distributed-systems.html#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> ~/wc_example/<span class="pp">*</span></span></code></pre></div>
<pre><code>## Ann  2
## Becky    2
## Simon    2
## a    3
## friend   3
## is   3
## not  1
## of   3</code></pre>

</div>
</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="15">
<li id="fn15"><p>For a more detailed discussion of what <code>map</code> and <code>reduce</code> have <em>actually</em> to do with MapReduce see <a href="https://medium.com/@jkff/mapreduce-is-not-functional-programming-39109a4ba7b2">this post</a>.<a href="distributed-systems.html#fnref15" class="footnote-back">↩︎</a></p></li>
<li id="fn16"><p>More sophisticated programs need to be custom made, written in Java.<a href="distributed-systems.html#fnref16" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="hardware-computing-resources.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="cloud-computing.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 1
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bigdata.pdf", "bigdata.html", "bigdata.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
